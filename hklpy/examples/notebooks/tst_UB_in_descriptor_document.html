

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>UB : Save and Restore Crystal Orientation &mdash; hklpy 0+untagged.1.gaed224a.dirty documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="WIP: save reflection information in stream" href="tst_UB_in_stream.html" />
    <link rel="prev" title="NSLS-II TARDIS Configuration" href="var_nslsii_tardis.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> hklpy
          

          
          </a>

          
            
            
              <div class="version">
                0+untagged.1.gaed224a.dirty
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Core Functionality</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
</ul>
<p class="caption"><span class="caption-text">Ready-to-Use Devices</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../ready_to_use.html">Ready-to-Use Devices</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#diffractometer-geometries">Diffractometer Geometries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#how-to-guides">How-to Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#variations">Variations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#tests-and-comparisons">Tests and Comparisons</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#"><strong>UB</strong> : Save and Restore Crystal Orientation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-collection">Data collection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setup-for-data-collection">Setup for data collection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-simulated-4-circle-diffractometer">Build simulated 4-circle diffractometer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#collect-data-with-all-the-diffractometers">Collect data with all the diffractometers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#show-the-orientation-information-that-was-collected">Show the orientation information that was collected</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#show-orientation-that-was-saved">Show orientation that was saved</a></li>
<li class="toctree-l4"><a class="reference internal" href="#show-runs-with-orientation-information">Show runs with orientation information</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#restore-orientation-information">Restore orientation information</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#restore-the-recovered-fourc-orientation-into-orange">Restore the recovered <code class="docutils literal notranslate"><span class="pre">fourc</span></code> orientation into <code class="docutils literal notranslate"><span class="pre">orange</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#try-to-restore-the-recovered-fourc-orientation-in-kappa">Try to restore the recovered <code class="docutils literal notranslate"><span class="pre">fourc</span></code> orientation in <code class="docutils literal notranslate"><span class="pre">kappa</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#try-to-create-a-sample-when-it-already-exists">Try to create a sample when it already exists</a></li>
<li class="toctree-l4"><a class="reference internal" href="#restore-the-energy">Restore the energy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tst_UB_in_stream.html">WIP: save reflection information in stream</a></li>
<li class="toctree-l3"><a class="reference internal" href="tst_e4cv_fourc.html">Compare E4CV 4-circle orientation with SPEC fourc</a></li>
<li class="toctree-l3"><a class="reference internal" href="tst_e6c_test_calculations.html">Non-exhaustive test of E6C calculations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">hklpy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Examples</a> &raquo;</li>
        
      <li><strong>UB</strong> : Save and Restore Crystal Orientation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/examples/notebooks/tst_UB_in_descriptor_document.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ub-save-and-restore-crystal-orientation">
<h1><strong>UB</strong> : Save and Restore Crystal Orientation<a class="headerlink" href="#ub-save-and-restore-crystal-orientation" title="Permalink to this headline">¶</a></h1>
<p>see: <a class="reference external" href="https://github.com/bluesky/hklpy/issues/50">https://github.com/bluesky/hklpy/issues/50</a></p>
<p><strong>Objectives</strong></p>
<ol class="arabic simple">
<li><p>Save the information defining the crystal orientation into the
descriptor document</p></li>
<li><p>List runs that have orientation that can be restored</p></li>
<li><p>Restore crystal orientation from a given Bluesky run</p></li>
</ol>
</div>
<hr class="docutils" />
<div class="section" id="data-collection">
<h1>Data collection<a class="headerlink" href="#data-collection" title="Permalink to this headline">¶</a></h1>
<div class="section" id="setup-for-data-collection">
<h2>Setup for data collection<a class="headerlink" href="#setup-for-data-collection" title="Permalink to this headline">¶</a></h2>
<p>Use a local, temporary, file-based databroker. It will reset after each
restart of the notebook. Prepare to define the diffractometers needed
here plus some items from the ophyd simulators.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gi</span>
<span class="n">gi</span><span class="o">.</span><span class="n">require_version</span><span class="p">(</span><span class="s1">&#39;Hkl&#39;</span><span class="p">,</span> <span class="s1">&#39;5.0&#39;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">bluesky</span> <span class="kn">import</span> <span class="n">RunEngine</span>
<span class="kn">from</span> <span class="nn">bluesky.callbacks.best_effort</span> <span class="kn">import</span> <span class="n">BestEffortCallback</span>
<span class="kn">import</span> <span class="nn">bluesky.plans</span> <span class="k">as</span> <span class="nn">bp</span>
<span class="kn">import</span> <span class="nn">bluesky.plan_stubs</span> <span class="k">as</span> <span class="nn">bps</span>
<span class="kn">import</span> <span class="nn">bluesky.preprocessors</span> <span class="k">as</span> <span class="nn">bpp</span>
<span class="kn">import</span> <span class="nn">databroker</span>
<span class="kn">import</span> <span class="nn">hkl</span>
<span class="kn">from</span> <span class="nn">hkl.calc</span> <span class="kn">import</span> <span class="n">A_KEV</span>
<span class="kn">from</span> <span class="nn">hkl.diffract</span> <span class="kn">import</span> <span class="n">Constraint</span>
<span class="kn">from</span> <span class="nn">hkl.util</span> <span class="kn">import</span> <span class="n">Lattice</span><span class="p">,</span> <span class="n">run_orientation_info</span><span class="p">,</span> <span class="n">list_orientation_runs</span>
<span class="kn">from</span> <span class="nn">hkl.geometries</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pyRestTable</span>
<span class="kn">from</span> <span class="nn">ophyd</span> <span class="kn">import</span> <span class="n">Component</span><span class="p">,</span> <span class="n">Device</span><span class="p">,</span> <span class="n">EpicsSignal</span><span class="p">,</span> <span class="n">Signal</span>
<span class="kn">from</span> <span class="nn">ophyd.signal</span> <span class="kn">import</span> <span class="n">AttributeSignal</span><span class="p">,</span> <span class="n">ArrayAttributeSignal</span>
<span class="kn">from</span> <span class="nn">ophyd.sim</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">bec</span> <span class="o">=</span> <span class="n">BestEffortCallback</span><span class="p">()</span>
<span class="n">bec</span><span class="o">.</span><span class="n">disable_plots</span><span class="p">()</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">databroker</span><span class="o">.</span><span class="n">temp</span><span class="p">()</span><span class="o">.</span><span class="n">v2</span>

<span class="n">RE</span> <span class="o">=</span> <span class="n">RunEngine</span><span class="p">({})</span>
<span class="n">RE</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">bec</span><span class="p">)</span>
<span class="n">RE</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">v1</span><span class="o">.</span><span class="n">insert</span><span class="p">)</span>
<span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;tst_UB_in_descriptor_document&quot;</span>
<span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">[</span><span class="s2">&quot;objective&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Demonstrate UB matrix save &amp; restore in descriptor document of bluesky run&quot;</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="build-simulated-4-circle-diffractometer">
<h2>Build simulated 4-circle diffractometer<a class="headerlink" href="#build-simulated-4-circle-diffractometer" title="Permalink to this headline">¶</a></h2>
<p>Build two 4-circles so that we can test routines that differentiate
between similar diffractometers. Use the second one to restore
orientation saved from the first.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Fourc</span><span class="p">(</span><span class="n">SimulatedE4CV</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">fourc</span> <span class="o">=</span> <span class="n">Fourc</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fourc&quot;</span><span class="p">)</span>
<span class="n">fourc</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">A_KEV</span> <span class="o">/</span> <span class="mf">1.54</span><span class="p">)</span>
<span class="n">a0</span> <span class="o">=</span> <span class="mf">5.4310196</span>
<span class="n">fourc</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">new_sample</span><span class="p">(</span><span class="s2">&quot;silicon&quot;</span><span class="p">,</span> <span class="n">lattice</span><span class="o">=</span><span class="p">(</span><span class="n">a0</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="n">fourc</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">compute_UB</span><span class="p">(</span>
    <span class="n">fourc</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">add_reflection</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">145.451</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">69.0966</span><span class="p">)),</span>
    <span class="n">fourc</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">add_reflection</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">145.451</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mf">69.0966</span><span class="p">))</span>
<span class="p">)</span>
<span class="n">fourc</span><span class="o">.</span><span class="n">pa</span><span class="p">()</span>

<span class="n">orange</span> <span class="o">=</span> <span class="n">Fourc</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;orange&quot;</span><span class="p">)</span>
<span class="n">orange</span><span class="o">.</span><span class="n">pa</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">=====================</span> <span class="o">===========================================================================</span>
<span class="n">term</span>                  <span class="n">value</span>
<span class="o">=====================</span> <span class="o">===========================================================================</span>
<span class="n">diffractometer</span>        <span class="n">fourc</span>
<span class="n">geometry</span>              <span class="n">E4CV</span>
<span class="k">class</span>                 <span class="nc">Fourc</span>
<span class="n">energy</span> <span class="p">(</span><span class="n">keV</span><span class="p">)</span>          <span class="mf">8.05092</span>
<span class="n">wavelength</span> <span class="p">(</span><span class="n">angstrom</span><span class="p">)</span> <span class="mf">1.54000</span>
<span class="n">calc</span> <span class="n">engine</span>           <span class="n">hkl</span>
<span class="n">mode</span>                  <span class="n">bissector</span>
<span class="n">positions</span>             <span class="o">=====</span> <span class="o">=======</span>
                      <span class="n">name</span>  <span class="n">value</span>
                      <span class="o">=====</span> <span class="o">=======</span>
                      <span class="n">omega</span> <span class="mf">0.00000</span>
                      <span class="n">chi</span>   <span class="mf">0.00000</span>
                      <span class="n">phi</span>   <span class="mf">0.00000</span>
                      <span class="n">tth</span>   <span class="mf">0.00000</span>
                      <span class="o">=====</span> <span class="o">=======</span>
<span class="n">constraints</span>           <span class="o">=====</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
                      <span class="n">axis</span>  <span class="n">low_limit</span> <span class="n">high_limit</span> <span class="n">value</span> <span class="n">fit</span>
                      <span class="o">=====</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
                      <span class="n">omega</span> <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">chi</span>   <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">phi</span>   <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">tth</span>   <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="o">=====</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
<span class="n">sample</span><span class="p">:</span> <span class="n">silicon</span>       <span class="o">=================</span> <span class="o">=========================================================</span>
                      <span class="n">term</span>              <span class="n">value</span>
                      <span class="o">=================</span> <span class="o">=========================================================</span>
                      <span class="n">unit</span> <span class="n">cell</span> <span class="n">edges</span>   <span class="n">a</span><span class="o">=</span><span class="mf">5.4310196</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">5.4310196</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mf">5.4310196</span>
                      <span class="n">unit</span> <span class="n">cell</span> <span class="n">angles</span>  <span class="n">alpha</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">90.0</span>
                      <span class="n">ref</span> <span class="mi">1</span> <span class="p">(</span><span class="n">hkl</span><span class="p">)</span>       <span class="n">h</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">0.0</span>
                      <span class="n">ref</span> <span class="mi">1</span> <span class="n">positioners</span> <span class="n">omega</span><span class="o">=-</span><span class="mf">145.45100</span><span class="p">,</span> <span class="n">chi</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">tth</span><span class="o">=</span><span class="mf">69.09660</span>
                      <span class="n">ref</span> <span class="mi">2</span> <span class="p">(</span><span class="n">hkl</span><span class="p">)</span>       <span class="n">h</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">0.0</span>
                      <span class="n">ref</span> <span class="mi">2</span> <span class="n">positioners</span> <span class="n">omega</span><span class="o">=-</span><span class="mf">145.45100</span><span class="p">,</span> <span class="n">chi</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="mf">90.00000</span><span class="p">,</span> <span class="n">tth</span><span class="o">=</span><span class="mf">69.09660</span>
                      <span class="p">[</span><span class="n">U</span><span class="p">]</span>               <span class="p">[[</span><span class="o">-</span><span class="mf">1.22173048e-05</span> <span class="o">-</span><span class="mf">1.00000000e+00</span>  <span class="mf">0.00000000e+00</span><span class="p">]</span>
                                         <span class="p">[</span> <span class="mf">0.00000000e+00</span>  <span class="mf">0.00000000e+00</span>  <span class="mf">1.00000000e+00</span><span class="p">]</span>
                                         <span class="p">[</span><span class="o">-</span><span class="mf">1.00000000e+00</span>  <span class="mf">1.22173048e-05</span>  <span class="mf">0.00000000e+00</span><span class="p">]]</span>
                      <span class="p">[</span><span class="n">UB</span><span class="p">]</span>              <span class="p">[[</span><span class="o">-</span><span class="mf">1.41342870e-05</span> <span class="o">-</span><span class="mf">1.15690713e+00</span>  <span class="mf">7.08409963e-17</span><span class="p">]</span>
                                         <span class="p">[</span> <span class="mf">0.00000000e+00</span>  <span class="mf">0.00000000e+00</span>  <span class="mf">1.15690713e+00</span><span class="p">]</span>
                                         <span class="p">[</span><span class="o">-</span><span class="mf">1.15690713e+00</span>  <span class="mf">1.41342870e-05</span>  <span class="mf">7.08392653e-17</span><span class="p">]]</span>
                      <span class="o">=================</span> <span class="o">=========================================================</span>
<span class="o">=====================</span> <span class="o">===========================================================================</span>

<span class="o">=====================</span> <span class="o">====================================================================</span>
<span class="n">term</span>                  <span class="n">value</span>
<span class="o">=====================</span> <span class="o">====================================================================</span>
<span class="n">diffractometer</span>        <span class="n">orange</span>
<span class="n">geometry</span>              <span class="n">E4CV</span>
<span class="k">class</span>                 <span class="nc">Fourc</span>
<span class="n">energy</span> <span class="p">(</span><span class="n">keV</span><span class="p">)</span>          <span class="mf">8.05092</span>
<span class="n">wavelength</span> <span class="p">(</span><span class="n">angstrom</span><span class="p">)</span> <span class="mf">1.54000</span>
<span class="n">calc</span> <span class="n">engine</span>           <span class="n">hkl</span>
<span class="n">mode</span>                  <span class="n">bissector</span>
<span class="n">positions</span>             <span class="o">=====</span> <span class="o">=======</span>
                      <span class="n">name</span>  <span class="n">value</span>
                      <span class="o">=====</span> <span class="o">=======</span>
                      <span class="n">omega</span> <span class="mf">0.00000</span>
                      <span class="n">chi</span>   <span class="mf">0.00000</span>
                      <span class="n">phi</span>   <span class="mf">0.00000</span>
                      <span class="n">tth</span>   <span class="mf">0.00000</span>
                      <span class="o">=====</span> <span class="o">=======</span>
<span class="n">constraints</span>           <span class="o">=====</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
                      <span class="n">axis</span>  <span class="n">low_limit</span> <span class="n">high_limit</span> <span class="n">value</span> <span class="n">fit</span>
                      <span class="o">=====</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
                      <span class="n">omega</span> <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">chi</span>   <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">phi</span>   <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">tth</span>   <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="o">=====</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
<span class="n">sample</span><span class="p">:</span> <span class="n">main</span>          <span class="o">================</span> <span class="o">===================================================</span>
                      <span class="n">term</span>             <span class="n">value</span>
                      <span class="o">================</span> <span class="o">===================================================</span>
                      <span class="n">unit</span> <span class="n">cell</span> <span class="n">edges</span>  <span class="n">a</span><span class="o">=</span><span class="mf">1.54</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">1.54</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mf">1.54</span>
                      <span class="n">unit</span> <span class="n">cell</span> <span class="n">angles</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">90.0</span>
                      <span class="p">[</span><span class="n">U</span><span class="p">]</span>              <span class="p">[[</span><span class="mf">1.</span> <span class="mf">0.</span> <span class="mf">0.</span><span class="p">]</span>
                                        <span class="p">[</span><span class="mf">0.</span> <span class="mf">1.</span> <span class="mf">0.</span><span class="p">]</span>
                                        <span class="p">[</span><span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">1.</span><span class="p">]]</span>
                      <span class="p">[</span><span class="n">UB</span><span class="p">]</span>             <span class="p">[[</span> <span class="mf">4.07999046e+00</span> <span class="o">-</span><span class="mf">2.49827363e-16</span> <span class="o">-</span><span class="mf">2.49827363e-16</span><span class="p">]</span>
                                        <span class="p">[</span> <span class="mf">0.00000000e+00</span>  <span class="mf">4.07999046e+00</span> <span class="o">-</span><span class="mf">2.49827363e-16</span><span class="p">]</span>
                                        <span class="p">[</span> <span class="mf">0.00000000e+00</span>  <span class="mf">0.00000000e+00</span>  <span class="mf">4.07999046e+00</span><span class="p">]]</span>
                      <span class="o">================</span> <span class="o">===================================================</span>
<span class="o">=====================</span> <span class="o">====================================================================</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">pyRestTable</span><span class="o">.</span><span class="n">rest_table</span><span class="o">.</span><span class="n">Table</span> <span class="n">at</span> <span class="mh">0x7fe3a3fd34c0</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Build simulators for other diffractometer geometries to test code that
differentiates between various possibile sources for restore of
orientation information.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Kappa</span><span class="p">(</span><span class="n">SimulatedK4CV</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">kappa</span> <span class="o">=</span> <span class="n">Kappa</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;kappa&quot;</span><span class="p">)</span>
<span class="n">kappa</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">A_KEV</span> <span class="o">/</span> <span class="mf">1.54</span><span class="p">)</span>
<span class="n">a0</span> <span class="o">=</span> <span class="mf">5.4310196</span>
<span class="n">kappa</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">new_sample</span><span class="p">(</span><span class="s2">&quot;silicon&quot;</span><span class="p">,</span> <span class="n">lattice</span><span class="o">=</span><span class="p">(</span><span class="n">a0</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="n">kappa</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">compute_UB</span><span class="p">(</span>
    <span class="n">kappa</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">add_reflection</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mf">55.4507</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mf">69.0966</span><span class="p">)),</span>
    <span class="n">kappa</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">add_reflection</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5950</span><span class="p">,</span> <span class="mf">134.7568</span><span class="p">,</span> <span class="mf">123.3554</span><span class="p">,</span> <span class="o">-</span><span class="mf">69.0966</span><span class="p">))</span>
<span class="p">)</span>
<span class="n">kappa</span><span class="o">.</span><span class="n">pa</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">=====================</span> <span class="o">=================================================================================</span>
<span class="n">term</span>                  <span class="n">value</span>
<span class="o">=====================</span> <span class="o">=================================================================================</span>
<span class="n">diffractometer</span>        <span class="n">kappa</span>
<span class="n">geometry</span>              <span class="n">K4CV</span>
<span class="k">class</span>                 <span class="nc">Kappa</span>
<span class="n">energy</span> <span class="p">(</span><span class="n">keV</span><span class="p">)</span>          <span class="mf">8.05092</span>
<span class="n">wavelength</span> <span class="p">(</span><span class="n">angstrom</span><span class="p">)</span> <span class="mf">1.54000</span>
<span class="n">calc</span> <span class="n">engine</span>           <span class="n">hkl</span>
<span class="n">mode</span>                  <span class="n">bissector</span>
<span class="n">positions</span>             <span class="o">======</span> <span class="o">=======</span>
                      <span class="n">name</span>   <span class="n">value</span>
                      <span class="o">======</span> <span class="o">=======</span>
                      <span class="n">komega</span> <span class="mf">0.00000</span>
                      <span class="n">kappa</span>  <span class="mf">0.00000</span>
                      <span class="n">kphi</span>   <span class="mf">0.00000</span>
                      <span class="n">tth</span>    <span class="mf">0.00000</span>
                      <span class="o">======</span> <span class="o">=======</span>
<span class="n">constraints</span>           <span class="o">======</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
                      <span class="n">axis</span>   <span class="n">low_limit</span> <span class="n">high_limit</span> <span class="n">value</span> <span class="n">fit</span>
                      <span class="o">======</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
                      <span class="n">komega</span> <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">kappa</span>  <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">kphi</span>   <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">tth</span>    <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="o">======</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
<span class="n">sample</span><span class="p">:</span> <span class="n">silicon</span>       <span class="o">=================</span> <span class="o">===============================================================</span>
                      <span class="n">term</span>              <span class="n">value</span>
                      <span class="o">=================</span> <span class="o">===============================================================</span>
                      <span class="n">unit</span> <span class="n">cell</span> <span class="n">edges</span>   <span class="n">a</span><span class="o">=</span><span class="mf">5.4310196</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">5.4310196</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mf">5.4310196</span>
                      <span class="n">unit</span> <span class="n">cell</span> <span class="n">angles</span>  <span class="n">alpha</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">90.0</span>
                      <span class="n">ref</span> <span class="mi">1</span> <span class="p">(</span><span class="n">hkl</span><span class="p">)</span>       <span class="n">h</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">0.0</span>
                      <span class="n">ref</span> <span class="mi">1</span> <span class="n">positioners</span> <span class="n">komega</span><span class="o">=</span><span class="mf">55.45070</span><span class="p">,</span> <span class="n">kappa</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">kphi</span><span class="o">=</span><span class="mf">90.00000</span><span class="p">,</span> <span class="n">tth</span><span class="o">=-</span><span class="mf">69.09660</span>
                      <span class="n">ref</span> <span class="mi">2</span> <span class="p">(</span><span class="n">hkl</span><span class="p">)</span>       <span class="n">h</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">0.0</span>
                      <span class="n">ref</span> <span class="mi">2</span> <span class="n">positioners</span> <span class="n">komega</span><span class="o">=-</span><span class="mf">1.59500</span><span class="p">,</span> <span class="n">kappa</span><span class="o">=</span><span class="mf">134.75680</span><span class="p">,</span> <span class="n">kphi</span><span class="o">=</span><span class="mf">123.35540</span><span class="p">,</span> <span class="n">tth</span><span class="o">=-</span><span class="mf">69.09660</span>
                      <span class="p">[</span><span class="n">U</span><span class="p">]</span>               <span class="p">[[</span><span class="o">-</span><span class="mf">1.74532925e-05</span> <span class="o">-</span><span class="mf">6.22695871e-06</span>  <span class="mf">1.00000000e+00</span><span class="p">]</span>
                                         <span class="p">[</span> <span class="mf">0.00000000e+00</span> <span class="o">-</span><span class="mf">1.00000000e+00</span> <span class="o">-</span><span class="mf">6.22695872e-06</span><span class="p">]</span>
                                         <span class="p">[</span> <span class="mf">1.00000000e+00</span> <span class="o">-</span><span class="mf">1.08680932e-10</span>  <span class="mf">1.74532925e-05</span><span class="p">]]</span>
                      <span class="p">[</span><span class="n">UB</span><span class="p">]</span>              <span class="p">[[</span><span class="o">-</span><span class="mf">2.01918386e-05</span> <span class="o">-</span><span class="mf">7.20401294e-06</span>  <span class="mf">1.15690713e+00</span><span class="p">]</span>
                                         <span class="p">[</span> <span class="mf">0.00000000e+00</span> <span class="o">-</span><span class="mf">1.15690713e+00</span> <span class="o">-</span><span class="mf">7.20401295e-06</span><span class="p">]</span>
                                         <span class="p">[</span> <span class="mf">1.15690713e+00</span> <span class="o">-</span><span class="mf">1.25733816e-10</span>  <span class="mf">2.01918386e-05</span><span class="p">]]</span>
                      <span class="o">=================</span> <span class="o">===============================================================</span>
<span class="o">=====================</span> <span class="o">=================================================================================</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">pyRestTable</span><span class="o">.</span><span class="n">rest_table</span><span class="o">.</span><span class="n">Table</span> <span class="n">at</span> <span class="mh">0x7fe3a373f4c0</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Sixc</span><span class="p">(</span><span class="n">SimulatedE6C</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">sixc</span> <span class="o">=</span> <span class="n">Sixc</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sixc&quot;</span><span class="p">)</span>
<span class="n">sixc</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">A_KEV</span> <span class="o">/</span> <span class="mf">1.54</span><span class="p">)</span>
<span class="n">a0</span> <span class="o">=</span> <span class="mf">5.4310196</span>
<span class="n">sixc</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">new_sample</span><span class="p">(</span><span class="s2">&quot;silicon&quot;</span><span class="p">,</span> <span class="n">lattice</span><span class="o">=</span><span class="p">(</span><span class="n">a0</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="n">sixc</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">compute_UB</span><span class="p">(</span>
    <span class="n">sixc</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">add_reflection</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">145.451</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">69.0966</span><span class="p">)),</span>
    <span class="n">sixc</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">add_reflection</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">145.451</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">69.0966</span><span class="p">))</span>
<span class="p">)</span>
<span class="n">sixc</span><span class="o">.</span><span class="n">pa</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">=====================</span> <span class="o">========================================================================================================</span>
<span class="n">term</span>                  <span class="n">value</span>
<span class="o">=====================</span> <span class="o">========================================================================================================</span>
<span class="n">diffractometer</span>        <span class="n">sixc</span>
<span class="n">geometry</span>              <span class="n">E6C</span>
<span class="k">class</span>                 <span class="nc">Sixc</span>
<span class="n">energy</span> <span class="p">(</span><span class="n">keV</span><span class="p">)</span>          <span class="mf">8.05092</span>
<span class="n">wavelength</span> <span class="p">(</span><span class="n">angstrom</span><span class="p">)</span> <span class="mf">1.54000</span>
<span class="n">calc</span> <span class="n">engine</span>           <span class="n">hkl</span>
<span class="n">mode</span>                  <span class="n">bissector_vertical</span>
<span class="n">positions</span>             <span class="o">=====</span> <span class="o">=======</span>
                      <span class="n">name</span>  <span class="n">value</span>
                      <span class="o">=====</span> <span class="o">=======</span>
                      <span class="n">mu</span>    <span class="mf">0.00000</span>
                      <span class="n">omega</span> <span class="mf">0.00000</span>
                      <span class="n">chi</span>   <span class="mf">0.00000</span>
                      <span class="n">phi</span>   <span class="mf">0.00000</span>
                      <span class="n">gamma</span> <span class="mf">0.00000</span>
                      <span class="n">delta</span> <span class="mf">0.00000</span>
                      <span class="o">=====</span> <span class="o">=======</span>
<span class="n">constraints</span>           <span class="o">=====</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
                      <span class="n">axis</span>  <span class="n">low_limit</span> <span class="n">high_limit</span> <span class="n">value</span> <span class="n">fit</span>
                      <span class="o">=====</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
                      <span class="n">mu</span>    <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">omega</span> <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">chi</span>   <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">phi</span>   <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">gamma</span> <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">delta</span> <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="o">=====</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
<span class="n">sample</span><span class="p">:</span> <span class="n">silicon</span>       <span class="o">=================</span> <span class="o">======================================================================================</span>
                      <span class="n">term</span>              <span class="n">value</span>
                      <span class="o">=================</span> <span class="o">======================================================================================</span>
                      <span class="n">unit</span> <span class="n">cell</span> <span class="n">edges</span>   <span class="n">a</span><span class="o">=</span><span class="mf">5.4310196</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">5.4310196</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mf">5.4310196</span>
                      <span class="n">unit</span> <span class="n">cell</span> <span class="n">angles</span>  <span class="n">alpha</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">90.0</span>
                      <span class="n">ref</span> <span class="mi">1</span> <span class="p">(</span><span class="n">hkl</span><span class="p">)</span>       <span class="n">h</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">0.0</span>
                      <span class="n">ref</span> <span class="mi">1</span> <span class="n">positioners</span> <span class="n">mu</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">omega</span><span class="o">=-</span><span class="mf">145.45100</span><span class="p">,</span> <span class="n">chi</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">69.09660</span>
                      <span class="n">ref</span> <span class="mi">2</span> <span class="p">(</span><span class="n">hkl</span><span class="p">)</span>       <span class="n">h</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">0.0</span>
                      <span class="n">ref</span> <span class="mi">2</span> <span class="n">positioners</span> <span class="n">mu</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">omega</span><span class="o">=-</span><span class="mf">145.45100</span><span class="p">,</span> <span class="n">chi</span><span class="o">=</span><span class="mf">90.00000</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">69.09660</span>
                      <span class="p">[</span><span class="n">U</span><span class="p">]</span>               <span class="p">[[</span><span class="o">-</span><span class="mf">1.22173048e-05</span> <span class="o">-</span><span class="mf">1.22173048e-05</span> <span class="o">-</span><span class="mf">1.00000000e+00</span><span class="p">]</span>
                                         <span class="p">[</span> <span class="mf">0.00000000e+00</span> <span class="o">-</span><span class="mf">1.00000000e+00</span>  <span class="mf">1.22173048e-05</span><span class="p">]</span>
                                         <span class="p">[</span><span class="o">-</span><span class="mf">1.00000000e+00</span>  <span class="mf">1.49262536e-10</span>  <span class="mf">1.22173048e-05</span><span class="p">]]</span>
                      <span class="p">[</span><span class="n">UB</span><span class="p">]</span>              <span class="p">[[</span><span class="o">-</span><span class="mf">1.41342870e-05</span> <span class="o">-</span><span class="mf">1.41342870e-05</span> <span class="o">-</span><span class="mf">1.15690713e+00</span><span class="p">]</span>
                                         <span class="p">[</span> <span class="mf">0.00000000e+00</span> <span class="o">-</span><span class="mf">1.15690713e+00</span>  <span class="mf">1.41342870e-05</span><span class="p">]</span>
                                         <span class="p">[</span><span class="o">-</span><span class="mf">1.15690713e+00</span>  <span class="mf">1.72682963e-10</span>  <span class="mf">1.41342870e-05</span><span class="p">]]</span>
                      <span class="o">=================</span> <span class="o">======================================================================================</span>
<span class="o">=====================</span> <span class="o">========================================================================================================</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">pyRestTable</span><span class="o">.</span><span class="n">rest_table</span><span class="o">.</span><span class="n">Table</span> <span class="n">at</span> <span class="mh">0x7fe3a3774d00</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="collect-data-with-all-the-diffractometers">
<h2>Collect data with all the diffractometers<a class="headerlink" href="#collect-data-with-all-the-diffractometers" title="Permalink to this headline">¶</a></h2>
<p>Show data collection with and without the orientation information.</p>
<p><strong>Tip</strong>: To save orientation information, add the diffractometer as an
additional detector. That’s all! Works with any scan that supports
multiple detectors.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">scan_all</span><span class="p">():</span>
    <span class="c1">### count runs ###</span>
    <span class="c1"># this run will not save orientation information</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">count</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">])</span>
    <span class="c1"># this run _will_ save orientation information for fourc</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">count</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">,</span> <span class="n">fourc</span><span class="p">])</span>
    <span class="c1"># this run _will_ save orientation information for several diffractometers</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">count</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">,</span> <span class="n">fourc</span><span class="p">,</span> <span class="n">orange</span><span class="p">,</span> <span class="n">kappa</span><span class="p">,</span> <span class="n">sixc</span><span class="p">])</span>

    <span class="c1">### scan runs ###</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">],</span> <span class="n">fourc</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">,</span> <span class="n">fourc</span><span class="p">],</span> <span class="n">fourc</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">],</span> <span class="n">kappa</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">,</span> <span class="n">kappa</span><span class="p">],</span> <span class="n">kappa</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">],</span> <span class="n">sixc</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">,</span> <span class="n">sixc</span><span class="p">],</span> <span class="n">sixc</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="c1">### mesh runs at the (100) ###</span>
    <span class="c1"># first, move to the (100)</span>
    <span class="k">yield from</span> <span class="n">bps</span><span class="o">.</span><span class="n">mv</span><span class="p">(</span><span class="n">fourc</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fourc</span><span class="o">.</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">fourc</span><span class="o">.</span><span class="n">l</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">rel_grid_scan</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">],</span> <span class="n">fourc</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">fourc</span><span class="o">.</span><span class="n">k</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="k">yield from</span> <span class="n">bp</span><span class="o">.</span><span class="n">rel_grid_scan</span><span class="p">([</span><span class="n">noisy_det</span><span class="p">,</span> <span class="n">fourc</span><span class="p">],</span> <span class="n">fourc</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">fourc</span><span class="o">.</span><span class="n">k</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Run the scans, gather all the uids into a variable to be ignored. That
way, they do not print.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_uids</span> <span class="o">=</span> <span class="n">RE</span><span class="p">(</span><span class="n">scan_all</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">1</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">45</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;86f981f5-f0ea-4133-968f-0dca15ce97c7&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>  <span class="n">noisy_det</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">45.5</span> <span class="o">|</span>      <span class="mf">1.081</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+</span>
<span class="n">generator</span> <span class="n">count</span> <span class="p">[</span><span class="s1">&#39;86f981f5&#39;</span><span class="p">]</span> <span class="p">(</span><span class="n">scan</span> <span class="n">num</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>





<span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">2</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">45</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;0253342c-f51f-491b-b340-e27f4a309a47&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>  <span class="n">noisy_det</span> <span class="o">|</span>    <span class="n">fourc_h</span> <span class="o">|</span>    <span class="n">fourc_k</span> <span class="o">|</span>    <span class="n">fourc_l</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">45.6</span> <span class="o">|</span>      <span class="mf">1.039</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="n">generator</span> <span class="n">count</span> <span class="p">[</span><span class="s1">&#39;0253342c&#39;</span><span class="p">]</span> <span class="p">(</span><span class="n">scan</span> <span class="n">num</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>





<span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">3</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">45</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;ad274f0c-d5f7-4ac1-88ed-de6aa4588a3a&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>     <span class="n">sixc_h</span> <span class="o">|</span>     <span class="n">sixc_k</span> <span class="o">|</span>     <span class="n">sixc_l</span> <span class="o">|</span>    <span class="n">fourc_h</span> <span class="o">|</span>    <span class="n">fourc_k</span> <span class="o">|</span>    <span class="n">fourc_l</span> <span class="o">|</span>   <span class="n">orange_h</span> <span class="o">|</span>   <span class="n">orange_k</span> <span class="o">|</span>   <span class="n">orange_l</span> <span class="o">|</span>    <span class="n">kappa_h</span> <span class="o">|</span>    <span class="n">kappa_k</span> <span class="o">|</span>    <span class="n">kappa_l</span> <span class="o">|</span>  <span class="n">noisy_det</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">45.8</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">1.045</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+</span>
<span class="n">generator</span> <span class="n">count</span> <span class="p">[</span><span class="s1">&#39;ad274f0c&#39;</span><span class="p">]</span> <span class="p">(</span><span class="n">scan</span> <span class="n">num</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span>





<span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">4</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">45</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;282c1a1d-072a-4cc0-8921-8c02767e427c&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>    <span class="n">fourc_h</span> <span class="o">|</span>  <span class="n">noisy_det</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">45.9</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">45.9</span> <span class="o">|</span>      <span class="mf">1.100</span> <span class="o">|</span>      <span class="mf">0.901</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="n">generator</span> <span class="n">scan</span> <span class="p">[</span><span class="s1">&#39;282c1a1d&#39;</span><span class="p">]</span> <span class="p">(</span><span class="n">scan</span> <span class="n">num</span><span class="p">:</span> <span class="mi">4</span><span class="p">)</span>





<span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">5</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">46</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;51327591-7e2e-45ae-8f3e-15b2d6fa8afd&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>    <span class="n">fourc_h</span> <span class="o">|</span>  <span class="n">noisy_det</span> <span class="o">|</span>    <span class="n">fourc_k</span> <span class="o">|</span>    <span class="n">fourc_l</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">46.1</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>      <span class="mf">1.057</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">46.1</span> <span class="o">|</span>      <span class="mf">1.100</span> <span class="o">|</span>      <span class="mf">1.092</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="n">generator</span> <span class="n">scan</span> <span class="p">[</span><span class="s1">&#39;51327591&#39;</span><span class="p">]</span> <span class="p">(</span><span class="n">scan</span> <span class="n">num</span><span class="p">:</span> <span class="mi">5</span><span class="p">)</span>





<span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">6</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">46</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;5943a85c-ab11-4cad-8174-18d86c240b0e&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>    <span class="n">kappa_h</span> <span class="o">|</span>  <span class="n">noisy_det</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">46.3</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>      <span class="mf">1.091</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">46.4</span> <span class="o">|</span>      <span class="mf">1.100</span> <span class="o">|</span>      <span class="mf">0.985</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="n">generator</span> <span class="n">scan</span> <span class="p">[</span><span class="s1">&#39;5943a85c&#39;</span><span class="p">]</span> <span class="p">(</span><span class="n">scan</span> <span class="n">num</span><span class="p">:</span> <span class="mi">6</span><span class="p">)</span>





<span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">7</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">46</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;f1205a9e-bd22-4b83-8ede-08ad61f07587&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>    <span class="n">kappa_h</span> <span class="o">|</span>    <span class="n">kappa_k</span> <span class="o">|</span>    <span class="n">kappa_l</span> <span class="o">|</span>  <span class="n">noisy_det</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">46.7</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">1.047</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">46.8</span> <span class="o">|</span>      <span class="mf">1.100</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.941</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="n">generator</span> <span class="n">scan</span> <span class="p">[</span><span class="s1">&#39;f1205a9e&#39;</span><span class="p">]</span> <span class="p">(</span><span class="n">scan</span> <span class="n">num</span><span class="p">:</span> <span class="mi">7</span><span class="p">)</span>





<span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">8</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">46</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;65f61f74-dac4-43fa-9a94-b82918968efd&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>     <span class="n">sixc_h</span> <span class="o">|</span>  <span class="n">noisy_det</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">46.9</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>      <span class="mf">0.911</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">46.9</span> <span class="o">|</span>      <span class="mf">1.100</span> <span class="o">|</span>      <span class="mf">1.043</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="n">generator</span> <span class="n">scan</span> <span class="p">[</span><span class="s1">&#39;65f61f74&#39;</span><span class="p">]</span> <span class="p">(</span><span class="n">scan</span> <span class="n">num</span><span class="p">:</span> <span class="mi">8</span><span class="p">)</span>





<span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">9</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">47</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;9f3f659d-6b42-4e22-95b0-eefb40946b2a&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>     <span class="n">sixc_h</span> <span class="o">|</span>     <span class="n">sixc_k</span> <span class="o">|</span>     <span class="n">sixc_l</span> <span class="o">|</span>  <span class="n">noisy_det</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.1</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">1.001</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.1</span> <span class="o">|</span>      <span class="mf">1.100</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">1.088</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="n">generator</span> <span class="n">scan</span> <span class="p">[</span><span class="s1">&#39;9f3f659d&#39;</span><span class="p">]</span> <span class="p">(</span><span class="n">scan</span> <span class="n">num</span><span class="p">:</span> <span class="mi">9</span><span class="p">)</span>





<span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">10</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">47</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;7fb76d3c-c45a-48b0-a24c-7a195d5812b5&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>    <span class="n">fourc_h</span> <span class="o">|</span>    <span class="n">fourc_k</span> <span class="o">|</span>  <span class="n">noisy_det</span> <span class="o">|</span>    <span class="n">fourc_l</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.3</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.100</span> <span class="o">|</span>      <span class="mf">1.047</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.3</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.945</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.3</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>      <span class="mf">0.100</span> <span class="o">|</span>      <span class="mf">0.945</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.3</span> <span class="o">|</span>      <span class="mf">1.000</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.100</span> <span class="o">|</span>      <span class="mf">0.979</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">5</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.4</span> <span class="o">|</span>      <span class="mf">1.000</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.953</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">6</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.4</span> <span class="o">|</span>      <span class="mf">1.000</span> <span class="o">|</span>      <span class="mf">0.100</span> <span class="o">|</span>      <span class="mf">0.988</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.4</span> <span class="o">|</span>      <span class="mf">1.100</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.100</span> <span class="o">|</span>      <span class="mf">0.912</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">8</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.4</span> <span class="o">|</span>      <span class="mf">1.100</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.986</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">9</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.4</span> <span class="o">|</span>      <span class="mf">1.100</span> <span class="o">|</span>      <span class="mf">0.100</span> <span class="o">|</span>      <span class="mf">0.903</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="n">generator</span> <span class="n">rel_grid_scan</span> <span class="p">[</span><span class="s1">&#39;7fb76d3c&#39;</span><span class="p">]</span> <span class="p">(</span><span class="n">scan</span> <span class="n">num</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>





<span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">11</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">17</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">47</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;61533526-709a-44e8-9b23-8681b37aaadd&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>    <span class="n">fourc_h</span> <span class="o">|</span>    <span class="n">fourc_k</span> <span class="o">|</span>  <span class="n">noisy_det</span> <span class="o">|</span>    <span class="n">fourc_l</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.6</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.100</span> <span class="o">|</span>      <span class="mf">0.984</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.6</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">1.062</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.6</span> <span class="o">|</span>      <span class="mf">0.900</span> <span class="o">|</span>      <span class="mf">0.100</span> <span class="o">|</span>      <span class="mf">0.950</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.6</span> <span class="o">|</span>      <span class="mf">1.000</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.100</span> <span class="o">|</span>      <span class="mf">0.924</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">5</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.6</span> <span class="o">|</span>      <span class="mf">1.000</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">0.901</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">6</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.7</span> <span class="o">|</span>      <span class="mf">1.000</span> <span class="o">|</span>      <span class="mf">0.100</span> <span class="o">|</span>      <span class="mf">1.098</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.7</span> <span class="o">|</span>      <span class="mf">1.100</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.100</span> <span class="o">|</span>      <span class="mf">1.072</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">8</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.7</span> <span class="o">|</span>      <span class="mf">1.100</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">0.000</span> <span class="o">|</span>      <span class="mf">1.078</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">9</span> <span class="o">|</span> <span class="mi">11</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">47.7</span> <span class="o">|</span>      <span class="mf">1.100</span> <span class="o">|</span>      <span class="mf">0.100</span> <span class="o">|</span>      <span class="mf">0.943</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+------------+------------+</span>
<span class="n">generator</span> <span class="n">rel_grid_scan</span> <span class="p">[</span><span class="s1">&#39;61533526&#39;</span><span class="p">]</span> <span class="p">(</span><span class="n">scan</span> <span class="n">num</span><span class="p">:</span> <span class="mi">11</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="show-the-orientation-information-that-was-collected">
<h1>Show the orientation information that was collected<a class="headerlink" href="#show-the-orientation-information-that-was-collected" title="Permalink to this headline">¶</a></h1>
<p>Show the full contents of the descriptor document (primary stream) for
the <code class="docutils literal notranslate"><span class="pre">fourc</span></code> “detector” from the run with <code class="docutils literal notranslate"><span class="pre">scan_id=5</span></code>. This is where
the orientation information is saved. You may need to expand the <em>Data
variables</em> row to see all the orientation information.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;fourc&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:                    (dim_0: 6, dim_1: 6, dim_10: 4, dim_11: 21, dim_2: 3, dim_3: 3, dim_4: 3, dim_5: 3, dim_6: 2, dim_7: 3, dim_8: 4, dim_9: 4, time: 2)
Coordinates:
  * time                       (time) float64 1.621e+09 1.621e+09
Dimensions without coordinates: dim_0, dim_1, dim_10, dim_11, dim_2, dim_3, dim_4, dim_5, dim_6, dim_7, dim_8, dim_9
Data variables: (12/21)
    fourc_energy               (time) float64 8.051 8.051
    fourc_energy_units         (time) &lt;U3 &#x27;keV&#x27; &#x27;keV&#x27;
    fourc_energy_offset        (time) int64 0 0
    fourc_geometry_name        (time) &lt;U4 &#x27;E4CV&#x27; &#x27;E4CV&#x27;
    fourc_class_name           (time) &lt;U5 &#x27;Fourc&#x27; &#x27;Fourc&#x27;
    fourc_sample_name          (time) &lt;U7 &#x27;silicon&#x27; &#x27;silicon&#x27;
    ...                         ...
    fourc__hklpy_version       (time) &lt;U24 &#x27;0.3.16+36.g1cc5d9e.dirty&#x27; &#x27;0.3.16...
    fourc__pseudos             (time, dim_7) &lt;U1 &#x27;h&#x27; &#x27;k&#x27; &#x27;l&#x27; &#x27;h&#x27; &#x27;k&#x27; &#x27;l&#x27;
    fourc__reals               (time, dim_8) &lt;U5 &#x27;omega&#x27; &#x27;chi&#x27; ... &#x27;phi&#x27; &#x27;tth&#x27;
    fourc__constraints         (time, dim_9, dim_10) float64 -180.0 ... 1.0
    fourc__mode                (time) &lt;U9 &#x27;bissector&#x27; &#x27;bissector&#x27;
    fourc_orientation_attrs    (time, dim_11) &lt;U19 &#x27;orientation_attrs&#x27; ... &#x27;_...</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-9e09cec7-25ef-4bd4-8f6b-12111d5ff812' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-9e09cec7-25ef-4bd4-8f6b-12111d5ff812' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>dim_0</span>: 6</li><li><span>dim_1</span>: 6</li><li><span>dim_10</span>: 4</li><li><span>dim_11</span>: 21</li><li><span>dim_2</span>: 3</li><li><span>dim_3</span>: 3</li><li><span>dim_4</span>: 3</li><li><span>dim_5</span>: 3</li><li><span>dim_6</span>: 2</li><li><span>dim_7</span>: 3</li><li><span>dim_8</span>: 4</li><li><span>dim_9</span>: 4</li><li><span class='xr-has-index'>time</span>: 2</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-7f884d41-408b-4b9a-ba69-c05bdb813635' class='xr-section-summary-in' type='checkbox'  checked><label for='section-7f884d41-408b-4b9a-ba69-c05bdb813635' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.621e+09 1.621e+09</div><input id='attrs-9abd6349-4a72-4eea-b65e-e7add9899cfe' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9abd6349-4a72-4eea-b65e-e7add9899cfe' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9d4edc7c-ea79-4fb5-b31c-116c1158457f' class='xr-var-data-in' type='checkbox'><label for='data-9d4edc7c-ea79-4fb5-b31c-116c1158457f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.621269e+09, 1.621269e+09])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1cc3b13c-4e9b-4ab6-8dfa-8735d78d3bb4' class='xr-section-summary-in' type='checkbox'  ><label for='section-1cc3b13c-4e9b-4ab6-8dfa-8735d78d3bb4' class='xr-section-summary' >Data variables: <span>(21)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>fourc_energy</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>8.051 8.051</div><input id='attrs-59275079-911b-449e-bdcc-45ba8c0f4659' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-59275079-911b-449e-bdcc-45ba8c0f4659' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cd5360f6-f9dd-4169-94c7-ae27b7b4f28b' class='xr-var-data-in' type='checkbox'><label for='data-cd5360f6-f9dd-4169-94c7-ae27b7b4f28b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([8.05092208, 8.05092208])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_energy_units</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>&lt;U3</div><div class='xr-var-preview xr-preview'>&#x27;keV&#x27; &#x27;keV&#x27;</div><input id='attrs-fc3727c4-9886-49be-850b-2e551cbf6088' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-fc3727c4-9886-49be-850b-2e551cbf6088' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fa4c11ef-f96b-4e78-89fb-ccc0332fca6b' class='xr-var-data-in' type='checkbox'><label for='data-fa4c11ef-f96b-4e78-89fb-ccc0332fca6b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;keV&#x27;, &#x27;keV&#x27;], dtype=&#x27;&lt;U3&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_energy_offset</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 0</div><input id='attrs-be4f3f36-a57d-4db5-8417-6b9cb214f6d1' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-be4f3f36-a57d-4db5-8417-6b9cb214f6d1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cb5d33d6-d9a1-42fe-8bd6-0fe5c071507e' class='xr-var-data-in' type='checkbox'><label for='data-cb5d33d6-d9a1-42fe-8bd6-0fe5c071507e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 0])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_geometry_name</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>&lt;U4</div><div class='xr-var-preview xr-preview'>&#x27;E4CV&#x27; &#x27;E4CV&#x27;</div><input id='attrs-91cfeb89-3917-4741-afed-5f95445bb451' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-91cfeb89-3917-4741-afed-5f95445bb451' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-909ffa53-c399-4e5e-9150-dab03c83dc28' class='xr-var-data-in' type='checkbox'><label for='data-909ffa53-c399-4e5e-9150-dab03c83dc28' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;E4CV&#x27;, &#x27;E4CV&#x27;], dtype=&#x27;&lt;U4&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_class_name</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>&lt;U5</div><div class='xr-var-preview xr-preview'>&#x27;Fourc&#x27; &#x27;Fourc&#x27;</div><input id='attrs-54abb98e-9aac-4216-90fc-5e14402a0041' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-54abb98e-9aac-4216-90fc-5e14402a0041' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cd42eb96-4403-4f8d-bfd9-7f65c24259ee' class='xr-var-data-in' type='checkbox'><label for='data-cd42eb96-4403-4f8d-bfd9-7f65c24259ee' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;Fourc&#x27;, &#x27;Fourc&#x27;], dtype=&#x27;&lt;U5&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_sample_name</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>&lt;U7</div><div class='xr-var-preview xr-preview'>&#x27;silicon&#x27; &#x27;silicon&#x27;</div><input id='attrs-d8e473d8-03c0-47c8-8960-415df7cc9529' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d8e473d8-03c0-47c8-8960-415df7cc9529' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fd2d862c-846d-475b-8545-7edea0372faf' class='xr-var-data-in' type='checkbox'><label for='data-fd2d862c-846d-475b-8545-7edea0372faf' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;silicon&#x27;, &#x27;silicon&#x27;], dtype=&#x27;&lt;U7&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_lattice</span></div><div class='xr-var-dims'>(time, dim_0)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>5.431 5.431 5.431 ... 90.0 90.0</div><input id='attrs-b49f7b07-d42d-4c5d-bbcf-e66581597dcd' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b49f7b07-d42d-4c5d-bbcf-e66581597dcd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-70d7ac54-ec84-422c-a335-a66a1a681e27' class='xr-var-data-in' type='checkbox'><label for='data-70d7ac54-ec84-422c-a335-a66a1a681e27' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 5.4310196,  5.4310196,  5.4310196, 90.       , 90.       ,
        90.       ],
       [ 5.4310196,  5.4310196,  5.4310196, 90.       , 90.       ,
        90.       ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_lattice_reciprocal</span></div><div class='xr-var-dims'>(time, dim_1)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.157 1.157 1.157 ... 90.0 90.0</div><input id='attrs-ddb89b05-f464-4b39-ad21-5d8b8a98ebeb' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ddb89b05-f464-4b39-ad21-5d8b8a98ebeb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-df1959bf-a132-4971-9b6b-2add7fa5f450' class='xr-var-data-in' type='checkbox'><label for='data-df1959bf-a132-4971-9b6b-2add7fa5f450' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 1.15690713,  1.15690713,  1.15690713, 90.        , 90.        ,
        90.        ],
       [ 1.15690713,  1.15690713,  1.15690713, 90.        , 90.        ,
        90.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_U</span></div><div class='xr-var-dims'>(time, dim_2, dim_3)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.222e-05 -1.0 ... 1.222e-05 0.0</div><input id='attrs-8a705c6c-81af-4190-8b6f-0f08c48200e3' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8a705c6c-81af-4190-8b6f-0f08c48200e3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-318b8c6b-53d4-46e2-a13f-8eef3074590d' class='xr-var-data-in' type='checkbox'><label for='data-318b8c6b-53d4-46e2-a13f-8eef3074590d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[-1.22173048e-05, -1.00000000e+00,  0.00000000e+00],
        [ 0.00000000e+00,  0.00000000e+00,  1.00000000e+00],
        [-1.00000000e+00,  1.22173048e-05,  0.00000000e+00]],

       [[-1.22173048e-05, -1.00000000e+00,  0.00000000e+00],
        [ 0.00000000e+00,  0.00000000e+00,  1.00000000e+00],
        [-1.00000000e+00,  1.22173048e-05,  0.00000000e+00]]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_UB</span></div><div class='xr-var-dims'>(time, dim_4, dim_5)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.413e-05 -1.157 ... 7.084e-17</div><input id='attrs-4583f42a-68ac-40eb-8328-bf2c32999d55' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-4583f42a-68ac-40eb-8328-bf2c32999d55' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8d715b59-7be0-48b7-b9c0-acc234650b6a' class='xr-var-data-in' type='checkbox'><label for='data-8d715b59-7be0-48b7-b9c0-acc234650b6a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[-1.41342870e-05, -1.15690713e+00,  7.08409963e-17],
        [ 0.00000000e+00,  0.00000000e+00,  1.15690713e+00],
        [-1.15690713e+00,  1.41342870e-05,  7.08392653e-17]],

       [[-1.41342870e-05, -1.15690713e+00,  7.08409963e-17],
        [ 0.00000000e+00,  0.00000000e+00,  1.15690713e+00],
        [-1.15690713e+00,  1.41342870e-05,  7.08392653e-17]]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_reflections_details</span></div><div class='xr-var-dims'>(time, dim_6)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>{&#x27;reflection&#x27;: {&#x27;h&#x27;: 4.0, &#x27;k&#x27;: 0...</div><input id='attrs-c8e2aa04-2039-4ff3-8e14-dce9a78e32e0' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c8e2aa04-2039-4ff3-8e14-dce9a78e32e0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a60eb2bf-cf48-46db-9f2b-960143273ac2' class='xr-var-data-in' type='checkbox'><label for='data-a60eb2bf-cf48-46db-9f2b-960143273ac2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[{&#x27;reflection&#x27;: {&#x27;h&#x27;: 4.0, &#x27;k&#x27;: 0.0, &#x27;l&#x27;: 0.0}, &#x27;flag&#x27;: 1, &#x27;wavelength&#x27;: 1.54, &#x27;position&#x27;: {&#x27;omega&#x27;: -145.451, &#x27;chi&#x27;: 0.0, &#x27;phi&#x27;: 0.0, &#x27;tth&#x27;: 69.0966}, &#x27;orientation_reflection&#x27;: True},
        {&#x27;reflection&#x27;: {&#x27;h&#x27;: 0.0, &#x27;k&#x27;: 4.0, &#x27;l&#x27;: 0.0}, &#x27;flag&#x27;: 1, &#x27;wavelength&#x27;: 1.54, &#x27;position&#x27;: {&#x27;omega&#x27;: -145.451, &#x27;chi&#x27;: 0.0, &#x27;phi&#x27;: 90.0, &#x27;tth&#x27;: 69.0966}, &#x27;orientation_reflection&#x27;: True}],
       [{&#x27;reflection&#x27;: {&#x27;h&#x27;: 4.0, &#x27;k&#x27;: 0.0, &#x27;l&#x27;: 0.0}, &#x27;flag&#x27;: 1, &#x27;wavelength&#x27;: 1.54, &#x27;position&#x27;: {&#x27;omega&#x27;: -145.451, &#x27;chi&#x27;: 0.0, &#x27;phi&#x27;: 0.0, &#x27;tth&#x27;: 69.0966}, &#x27;orientation_reflection&#x27;: True},
        {&#x27;reflection&#x27;: {&#x27;h&#x27;: 0.0, &#x27;k&#x27;: 4.0, &#x27;l&#x27;: 0.0}, &#x27;flag&#x27;: 1, &#x27;wavelength&#x27;: 1.54, &#x27;position&#x27;: {&#x27;omega&#x27;: -145.451, &#x27;chi&#x27;: 0.0, &#x27;phi&#x27;: 90.0, &#x27;tth&#x27;: 69.0966}, &#x27;orientation_reflection&#x27;: True}]],
      dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_ux</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-90.0 -90.0</div><input id='attrs-88e1c2de-11d2-44a5-87b7-962a344c0ea3' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-88e1c2de-11d2-44a5-87b7-962a344c0ea3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bac39320-9c00-4e31-9c1a-3b16eabfde27' class='xr-var-data-in' type='checkbox'><label for='data-bac39320-9c00-4e31-9c1a-3b16eabfde27' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-90., -90.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_uy</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0</div><input id='attrs-73cca467-5434-4902-a100-4862953c38da' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-73cca467-5434-4902-a100-4862953c38da' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-241de429-dd10-4dc0-ad00-bae67d1b5dae' class='xr-var-data-in' type='checkbox'><label for='data-241de429-dd10-4dc0-ad00-bae67d1b5dae' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0., 0.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_uz</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>90.0 90.0</div><input id='attrs-6571d4e6-b9be-401c-8116-b9131e88007f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-6571d4e6-b9be-401c-8116-b9131e88007f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2c7c3340-d849-438c-be35-f83f4b51b27d' class='xr-var-data-in' type='checkbox'><label for='data-2c7c3340-d849-438c-be35-f83f4b51b27d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([90.0007, 90.0007])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_diffractometer_name</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>&lt;U5</div><div class='xr-var-preview xr-preview'>&#x27;fourc&#x27; &#x27;fourc&#x27;</div><input id='attrs-95ffecd7-9325-4549-adbf-31615bcbfa77' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-95ffecd7-9325-4549-adbf-31615bcbfa77' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8a2060c4-e8c4-4d9d-9cdb-569cc67b4f43' class='xr-var-data-in' type='checkbox'><label for='data-8a2060c4-e8c4-4d9d-9cdb-569cc67b4f43' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;fourc&#x27;, &#x27;fourc&#x27;], dtype=&#x27;&lt;U5&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc__hklpy_version</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>&lt;U24</div><div class='xr-var-preview xr-preview'>&#x27;0.3.16+36.g1cc5d9e.dirty&#x27; &#x27;0.3....</div><input id='attrs-7bc75cad-3fa9-4429-9032-c8f61a3011dd' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-7bc75cad-3fa9-4429-9032-c8f61a3011dd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-62edfc16-6104-4861-a7bb-1dcdd98c0cc9' class='xr-var-data-in' type='checkbox'><label for='data-62edfc16-6104-4861-a7bb-1dcdd98c0cc9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;0.3.16+36.g1cc5d9e.dirty&#x27;, &#x27;0.3.16+36.g1cc5d9e.dirty&#x27;],
      dtype=&#x27;&lt;U24&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc__pseudos</span></div><div class='xr-var-dims'>(time, dim_7)</div><div class='xr-var-dtype'>&lt;U1</div><div class='xr-var-preview xr-preview'>&#x27;h&#x27; &#x27;k&#x27; &#x27;l&#x27; &#x27;h&#x27; &#x27;k&#x27; &#x27;l&#x27;</div><input id='attrs-8138369e-8409-419c-9055-c4d078099172' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8138369e-8409-419c-9055-c4d078099172' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ff902533-8296-4946-be00-5467e770bd2b' class='xr-var-data-in' type='checkbox'><label for='data-ff902533-8296-4946-be00-5467e770bd2b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[&#x27;h&#x27;, &#x27;k&#x27;, &#x27;l&#x27;],
       [&#x27;h&#x27;, &#x27;k&#x27;, &#x27;l&#x27;]], dtype=&#x27;&lt;U1&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc__reals</span></div><div class='xr-var-dims'>(time, dim_8)</div><div class='xr-var-dtype'>&lt;U5</div><div class='xr-var-preview xr-preview'>&#x27;omega&#x27; &#x27;chi&#x27; &#x27;phi&#x27; ... &#x27;phi&#x27; &#x27;tth&#x27;</div><input id='attrs-9ac77dee-13e6-459a-b4f1-bc5fbb868f07' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9ac77dee-13e6-459a-b4f1-bc5fbb868f07' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2a1e8d4a-7dc5-4ced-9fcf-5ba6d5b7b481' class='xr-var-data-in' type='checkbox'><label for='data-2a1e8d4a-7dc5-4ced-9fcf-5ba6d5b7b481' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[&#x27;omega&#x27;, &#x27;chi&#x27;, &#x27;phi&#x27;, &#x27;tth&#x27;],
       [&#x27;omega&#x27;, &#x27;chi&#x27;, &#x27;phi&#x27;, &#x27;tth&#x27;]], dtype=&#x27;&lt;U5&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc__constraints</span></div><div class='xr-var-dims'>(time, dim_9, dim_10)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-180.0 180.0 -7.331 ... -14.66 1.0</div><input id='attrs-ddf406d2-d44b-4f67-8245-dbe767d50988' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ddf406d2-d44b-4f67-8245-dbe767d50988' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1ca8e4fe-c538-4d36-b795-b5beb783be8e' class='xr-var-data-in' type='checkbox'><label for='data-1ca8e4fe-c538-4d36-b795-b5beb783be8e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[-1.80000000e+02,  1.80000000e+02, -7.33094761e+00,
          1.00000000e+00],
        [-1.80000000e+02,  1.80000000e+02, -3.73820157e-86,
          1.00000000e+00],
        [-1.80000000e+02,  1.80000000e+02,  6.99999999e-04,
          1.00000000e+00],
        [-1.80000000e+02,  1.80000000e+02, -1.46618952e+01,
          1.00000000e+00]],

       [[-1.80000000e+02,  1.80000000e+02, -7.33094761e+00,
          1.00000000e+00],
        [-1.80000000e+02,  1.80000000e+02, -3.73820157e-86,
          1.00000000e+00],
        [-1.80000000e+02,  1.80000000e+02,  6.99999999e-04,
          1.00000000e+00],
        [-1.80000000e+02,  1.80000000e+02, -1.46618952e+01,
          1.00000000e+00]]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc__mode</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>&lt;U9</div><div class='xr-var-preview xr-preview'>&#x27;bissector&#x27; &#x27;bissector&#x27;</div><input id='attrs-75d4755e-491a-43e4-841a-635b05affdda' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-75d4755e-491a-43e4-841a-635b05affdda' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-64f8180f-62e4-4ad5-b788-fe95f3d3de10' class='xr-var-data-in' type='checkbox'><label for='data-64f8180f-62e4-4ad5-b788-fe95f3d3de10' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;bissector&#x27;, &#x27;bissector&#x27;], dtype=&#x27;&lt;U9&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>fourc_orientation_attrs</span></div><div class='xr-var-dims'>(time, dim_11)</div><div class='xr-var-dtype'>&lt;U19</div><div class='xr-var-preview xr-preview'>&#x27;orientation_attrs&#x27; ... &#x27;_hklpy_...</div><input id='attrs-0750a389-e26a-4581-aed6-d1c9f825b680' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0750a389-e26a-4581-aed6-d1c9f825b680' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-942d849c-e1b0-40e0-88ad-bd4ce1b93365' class='xr-var-data-in' type='checkbox'><label for='data-942d849c-e1b0-40e0-88ad-bd4ce1b93365' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[&#x27;orientation_attrs&#x27;, &#x27;geometry_name&#x27;, &#x27;class_name&#x27;, &#x27;UB&#x27;, &#x27;U&#x27;,
        &#x27;ux&#x27;, &#x27;uy&#x27;, &#x27;uz&#x27;, &#x27;energy&#x27;, &#x27;energy_units&#x27;, &#x27;energy_offset&#x27;,
        &#x27;sample_name&#x27;, &#x27;lattice&#x27;, &#x27;lattice_reciprocal&#x27;,
        &#x27;reflections_details&#x27;, &#x27;_pseudos&#x27;, &#x27;_reals&#x27;, &#x27;_constraints&#x27;,
        &#x27;_mode&#x27;, &#x27;diffractometer_name&#x27;, &#x27;_hklpy_version&#x27;],
       [&#x27;orientation_attrs&#x27;, &#x27;geometry_name&#x27;, &#x27;class_name&#x27;, &#x27;UB&#x27;, &#x27;U&#x27;,
        &#x27;ux&#x27;, &#x27;uy&#x27;, &#x27;uz&#x27;, &#x27;energy&#x27;, &#x27;energy_units&#x27;, &#x27;energy_offset&#x27;,
        &#x27;sample_name&#x27;, &#x27;lattice&#x27;, &#x27;lattice_reciprocal&#x27;,
        &#x27;reflections_details&#x27;, &#x27;_pseudos&#x27;, &#x27;_reals&#x27;, &#x27;_constraints&#x27;,
        &#x27;_mode&#x27;, &#x27;diffractometer_name&#x27;, &#x27;_hklpy_version&#x27;]], dtype=&#x27;&lt;U19&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-449ec711-10c3-4ccd-a2b0-9e9e5eaae5e1' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-449ec711-10c3-4ccd-a2b0-9e9e5eaae5e1' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div><div class="section" id="show-orientation-that-was-saved">
<h2>Show orientation that was saved<a class="headerlink" href="#show-orientation-that-was-saved" title="Permalink to this headline">¶</a></h2>
<p>In <code class="docutils literal notranslate"><span class="pre">scan_id=3</span></code>, orientation information from 4 different
diffractometers was saved with the run. Show what is available from each
of those diffractometers. The columns in the next table are the
diffractometers, the rows are the orientation information saved for
each.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">roi</span> <span class="o">=</span> <span class="n">run_orientation_info</span><span class="p">(</span><span class="n">cat</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fourc</th>
      <th>kappa</th>
      <th>orange</th>
      <th>sixc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>energy</th>
      <td>8.05092</td>
      <td>8.05092</td>
      <td>8</td>
      <td>8.05092</td>
    </tr>
    <tr>
      <th>energy_units</th>
      <td>keV</td>
      <td>keV</td>
      <td>keV</td>
      <td>keV</td>
    </tr>
    <tr>
      <th>energy_offset</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>geometry_name</th>
      <td>E4CV</td>
      <td>K4CV</td>
      <td>E4CV</td>
      <td>E6C</td>
    </tr>
    <tr>
      <th>class_name</th>
      <td>Fourc</td>
      <td>Kappa</td>
      <td>Fourc</td>
      <td>Sixc</td>
    </tr>
    <tr>
      <th>sample_name</th>
      <td>silicon</td>
      <td>silicon</td>
      <td>main</td>
      <td>silicon</td>
    </tr>
    <tr>
      <th>lattice</th>
      <td>[5.4310196, 5.4310196, 5.4310196, 90.0, 90.0, ...</td>
      <td>[5.4310196, 5.4310196, 5.4310196, 90.0, 90.0, ...</td>
      <td>[1.54, 1.54, 1.54, 90.0, 90.0, 90.0]</td>
      <td>[5.4310196, 5.4310196, 5.4310196, 90.0, 90.0, ...</td>
    </tr>
    <tr>
      <th>lattice_reciprocal</th>
      <td>[1.1569071316147683, 1.1569071316147683, 1.156...</td>
      <td>[1.1569071316147683, 1.1569071316147683, 1.156...</td>
      <td>[4.079990459207523, 4.079990459207523, 4.07999...</td>
      <td>[1.1569071316147683, 1.1569071316147683, 1.156...</td>
    </tr>
    <tr>
      <th>U</th>
      <td>[[-1.2217304763832569e-05, -0.9999999999253688...</td>
      <td>[[-1.7453292519418075e-05, -6.226958714415446e...</td>
      <td>[[1.0, 0.0, 0.0], [0.0, 1.0, 0.0], [0.0, 0.0, ...</td>
      <td>[[-1.2217304763832569e-05, -1.2217304762008981...</td>
    </tr>
    <tr>
      <th>UB</th>
      <td>[[-1.4134287010388982e-05, -1.156907131528427,...</td>
      <td>[[-2.0191838585873458e-05, -7.2040129449779575...</td>
      <td>[[4.079990459207523, -2.4982736282101165e-16, ...</td>
      <td>[[-1.4134287010388982e-05, -1.4134287008279258...</td>
    </tr>
    <tr>
      <th>reflections_details</th>
      <td>[{'reflection': {'h': 4.0, 'k': 0.0, 'l': 0.0}...</td>
      <td>[{'reflection': {'h': 4.0, 'k': 0.0, 'l': 0.0}...</td>
      <td>[]</td>
      <td>[{'reflection': {'h': 4.0, 'k': 0.0, 'l': 0.0}...</td>
    </tr>
    <tr>
      <th>ux</th>
      <td>-90</td>
      <td>19.6353</td>
      <td>0</td>
      <td>-45</td>
    </tr>
    <tr>
      <th>uy</th>
      <td>0</td>
      <td>89.9989</td>
      <td>0</td>
      <td>-89.999</td>
    </tr>
    <tr>
      <th>uz</th>
      <td>90.0007</td>
      <td>160.365</td>
      <td>0</td>
      <td>135</td>
    </tr>
    <tr>
      <th>diffractometer_name</th>
      <td>fourc</td>
      <td>kappa</td>
      <td>orange</td>
      <td>sixc</td>
    </tr>
    <tr>
      <th>_hklpy_version</th>
      <td>0.3.16+36.g1cc5d9e.dirty</td>
      <td>0.3.16+36.g1cc5d9e.dirty</td>
      <td>0.3.16+36.g1cc5d9e.dirty</td>
      <td>0.3.16+36.g1cc5d9e.dirty</td>
    </tr>
    <tr>
      <th>_pseudos</th>
      <td>[h, k, l]</td>
      <td>[h, k, l]</td>
      <td>[h, k, l]</td>
      <td>[h, k, l]</td>
    </tr>
    <tr>
      <th>_reals</th>
      <td>[omega, chi, phi, tth]</td>
      <td>[komega, kappa, kphi, tth]</td>
      <td>[omega, chi, phi, tth]</td>
      <td>[mu, omega, chi, phi, gamma, delta]</td>
    </tr>
    <tr>
      <th>_constraints</th>
      <td>[[-180.0, 180.0, 0.0, 1.0], [-180.0, 180.0, 0....</td>
      <td>[[-180.0, 180.0, 0.0, 1.0], [-180.0, 180.0, 0....</td>
      <td>[[-180.0, 180.0, 0.0, 1.0], [-180.0, 180.0, 0....</td>
      <td>[[-180.0, 180.0, 0.0, 1.0], [-180.0, 180.0, 0....</td>
    </tr>
    <tr>
      <th>_mode</th>
      <td>bissector</td>
      <td>bissector</td>
      <td>bissector</td>
      <td>bissector_vertical</td>
    </tr>
    <tr>
      <th>orientation_attrs</th>
      <td>[orientation_attrs, geometry_name, class_name,...</td>
      <td>[orientation_attrs, geometry_name, class_name,...</td>
      <td>[orientation_attrs, geometry_name, class_name,...</td>
      <td>[orientation_attrs, geometry_name, class_name,...</td>
    </tr>
  </tbody>
</table>
</div></div>
<div class="section" id="show-runs-with-orientation-information">
<h2>Show runs with orientation information<a class="headerlink" href="#show-runs-with-orientation-information" title="Permalink to this headline">¶</a></h2>
<p>Since a given run (<code class="docutils literal notranslate"><span class="pre">scan_id</span></code>) may have more than one set of
orientation information, corresponding to more than one diffractometer,
report for each when found. Here, extra columns are reported for energy
&amp; units, and the crystal lattice parameters. The names are taken from
the above table. (They must be one of the names in the
<code class="docutils literal notranslate"><span class="pre">orientation_attrs</span></code> list.)</p>
<p>Use this type of listing to determine which <strong>scan_id</strong> and
<strong>diffractometer_name</strong> has the orientation you wish to recover. If the
<code class="docutils literal notranslate"><span class="pre">scan_id</span></code> is not unique, identify the run with the <strong>uid</strong> (as a
string, such as <code class="docutils literal notranslate"><span class="pre">cat[&quot;007abcd&quot;]</span></code>).</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list_orientation_runs</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="s2">&quot;energy&quot;</span><span class="p">,</span> <span class="s2">&quot;energy_units&quot;</span><span class="p">,</span> <span class="s2">&quot;lattice&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>scan_id</th>
      <th>sample_name</th>
      <th>diffractometer_name</th>
      <th>geometry_name</th>
      <th>energy</th>
      <th>energy_units</th>
      <th>lattice</th>
      <th>uid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>silicon</td>
      <td>fourc</td>
      <td>E4CV</td>
      <td>8.050922</td>
      <td>keV</td>
      <td>[5.4310196, 5.4310196, 5.4310196, 90.0, 90.0, ...</td>
      <td>0253342</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3</td>
      <td>silicon</td>
      <td>fourc</td>
      <td>E4CV</td>
      <td>8.050922</td>
      <td>keV</td>
      <td>[5.4310196, 5.4310196, 5.4310196, 90.0, 90.0, ...</td>
      <td>ad274f0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>silicon</td>
      <td>kappa</td>
      <td>K4CV</td>
      <td>8.050922</td>
      <td>keV</td>
      <td>[5.4310196, 5.4310196, 5.4310196, 90.0, 90.0, ...</td>
      <td>ad274f0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>main</td>
      <td>orange</td>
      <td>E4CV</td>
      <td>8.000000</td>
      <td>keV</td>
      <td>[1.54, 1.54, 1.54, 90.0, 90.0, 90.0]</td>
      <td>ad274f0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3</td>
      <td>silicon</td>
      <td>sixc</td>
      <td>E6C</td>
      <td>8.050922</td>
      <td>keV</td>
      <td>[5.4310196, 5.4310196, 5.4310196, 90.0, 90.0, ...</td>
      <td>ad274f0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5</td>
      <td>silicon</td>
      <td>fourc</td>
      <td>E4CV</td>
      <td>8.050922</td>
      <td>keV</td>
      <td>[5.4310196, 5.4310196, 5.4310196, 90.0, 90.0, ...</td>
      <td>5132759</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>silicon</td>
      <td>kappa</td>
      <td>K4CV</td>
      <td>8.050922</td>
      <td>keV</td>
      <td>[5.4310196, 5.4310196, 5.4310196, 90.0, 90.0, ...</td>
      <td>f1205a9</td>
    </tr>
    <tr>
      <th>7</th>
      <td>9</td>
      <td>silicon</td>
      <td>sixc</td>
      <td>E6C</td>
      <td>8.050922</td>
      <td>keV</td>
      <td>[5.4310196, 5.4310196, 5.4310196, 90.0, 90.0, ...</td>
      <td>9f3f659</td>
    </tr>
    <tr>
      <th>8</th>
      <td>10</td>
      <td>silicon</td>
      <td>fourc</td>
      <td>E4CV</td>
      <td>8.050922</td>
      <td>keV</td>
      <td>[5.4310196, 5.4310196, 5.4310196, 90.0, 90.0, ...</td>
      <td>7fb76d3</td>
    </tr>
    <tr>
      <th>9</th>
      <td>11</td>
      <td>silicon</td>
      <td>fourc</td>
      <td>E4CV</td>
      <td>8.050922</td>
      <td>keV</td>
      <td>[5.4310196, 5.4310196, 5.4310196, 90.0, 90.0, ...</td>
      <td>6153352</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<hr class="docutils" />
<div class="section" id="restore-orientation-information">
<h1>Restore orientation information<a class="headerlink" href="#restore-orientation-information" title="Permalink to this headline">¶</a></h1>
<p>This demo will restore the orientation information from a <code class="docutils literal notranslate"><span class="pre">fourc</span></code> run
(choosing <code class="docutils literal notranslate"><span class="pre">scan_id=2</span></code>) to the <code class="docutils literal notranslate"><span class="pre">orange</span></code> diffractometer. They have the
same <strong>geometry_name</strong> so the information is compatible.</p>
<p>First, get the orientation information from the chosen run. Show the
information for the <code class="docutils literal notranslate"><span class="pre">fourc</span></code> diffractometer.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">info</span> <span class="o">=</span> <span class="n">run_orientation_info</span><span class="p">(</span><span class="n">cat</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

<span class="kn">import</span> <span class="nn">pprint</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;fourc&quot;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;U&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="o">-</span><span class="mf">1.2217304763832569e-05</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.9999999999253688</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">0.9999999999253688</span><span class="p">,</span> <span class="mf">1.2217304763832569e-05</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]],</span>
 <span class="s1">&#39;UB&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="o">-</span><span class="mf">1.4134287010388982e-05</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.156907131528427</span><span class="p">,</span> <span class="mf">7.084099625231898e-17</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.1569071316147683</span><span class="p">],</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.156907131528427</span><span class="p">,</span> <span class="mf">1.4134287010459822e-05</span><span class="p">,</span> <span class="mf">7.083926530138442e-17</span><span class="p">]],</span>
 <span class="s1">&#39;_constraints&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="o">-</span><span class="mf">180.0</span><span class="p">,</span> <span class="mf">180.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
                  <span class="p">[</span><span class="o">-</span><span class="mf">180.0</span><span class="p">,</span> <span class="mf">180.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
                  <span class="p">[</span><span class="o">-</span><span class="mf">180.0</span><span class="p">,</span> <span class="mf">180.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
                  <span class="p">[</span><span class="o">-</span><span class="mf">180.0</span><span class="p">,</span> <span class="mf">180.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]],</span>
 <span class="s1">&#39;_hklpy_version&#39;</span><span class="p">:</span> <span class="s1">&#39;0.3.16+36.g1cc5d9e.dirty&#39;</span><span class="p">,</span>
 <span class="s1">&#39;_mode&#39;</span><span class="p">:</span> <span class="s1">&#39;bissector&#39;</span><span class="p">,</span>
 <span class="s1">&#39;_pseudos&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">],</span>
 <span class="s1">&#39;_reals&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;omega&#39;</span><span class="p">,</span> <span class="s1">&#39;chi&#39;</span><span class="p">,</span> <span class="s1">&#39;phi&#39;</span><span class="p">,</span> <span class="s1">&#39;tth&#39;</span><span class="p">],</span>
 <span class="s1">&#39;class_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Fourc&#39;</span><span class="p">,</span>
 <span class="s1">&#39;diffractometer_name&#39;</span><span class="p">:</span> <span class="s1">&#39;fourc&#39;</span><span class="p">,</span>
 <span class="s1">&#39;energy&#39;</span><span class="p">:</span> <span class="mf">8.050922077922078</span><span class="p">,</span>
 <span class="s1">&#39;energy_offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;energy_units&#39;</span><span class="p">:</span> <span class="s1">&#39;keV&#39;</span><span class="p">,</span>
 <span class="s1">&#39;geometry_name&#39;</span><span class="p">:</span> <span class="s1">&#39;E4CV&#39;</span><span class="p">,</span>
 <span class="s1">&#39;lattice&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">5.4310196</span><span class="p">,</span> <span class="mf">5.4310196</span><span class="p">,</span> <span class="mf">5.4310196</span><span class="p">,</span> <span class="mf">90.0</span><span class="p">,</span> <span class="mf">90.0</span><span class="p">,</span> <span class="mf">90.0</span><span class="p">],</span>
 <span class="s1">&#39;lattice_reciprocal&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.1569071316147683</span><span class="p">,</span>
                        <span class="mf">1.1569071316147683</span><span class="p">,</span>
                        <span class="mf">1.1569071316147683</span><span class="p">,</span>
                        <span class="mf">90.00000000000001</span><span class="p">,</span>
                        <span class="mf">90.00000000000001</span><span class="p">,</span>
                        <span class="mf">90.00000000000001</span><span class="p">],</span>
 <span class="s1">&#39;orientation_attrs&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;orientation_attrs&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;geometry_name&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;class_name&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;UB&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;U&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;ux&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;uy&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;uz&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;energy&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;energy_units&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;energy_offset&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;sample_name&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;lattice&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;lattice_reciprocal&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;reflections_details&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;_pseudos&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;_reals&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;_constraints&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;_mode&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;diffractometer_name&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;_hklpy_version&#39;</span><span class="p">],</span>
 <span class="s1">&#39;reflections_details&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                          <span class="s1">&#39;orientation_reflection&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                          <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;chi&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                       <span class="s1">&#39;omega&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">145.451</span><span class="p">,</span>
                                       <span class="s1">&#39;phi&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                       <span class="s1">&#39;tth&#39;</span><span class="p">:</span> <span class="mf">69.0966</span><span class="p">},</span>
                          <span class="s1">&#39;reflection&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">},</span>
                          <span class="s1">&#39;wavelength&#39;</span><span class="p">:</span> <span class="mf">1.54</span><span class="p">},</span>
                         <span class="p">{</span><span class="s1">&#39;flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                          <span class="s1">&#39;orientation_reflection&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                          <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;chi&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                       <span class="s1">&#39;omega&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">145.451</span><span class="p">,</span>
                                       <span class="s1">&#39;phi&#39;</span><span class="p">:</span> <span class="mf">90.0</span><span class="p">,</span>
                                       <span class="s1">&#39;tth&#39;</span><span class="p">:</span> <span class="mf">69.0966</span><span class="p">},</span>
                          <span class="s1">&#39;reflection&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">},</span>
                          <span class="s1">&#39;wavelength&#39;</span><span class="p">:</span> <span class="mf">1.54</span><span class="p">}],</span>
 <span class="s1">&#39;sample_name&#39;</span><span class="p">:</span> <span class="s1">&#39;silicon&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ux&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">90.0</span><span class="p">,</span>
 <span class="s1">&#39;uy&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s1">&#39;uz&#39;</span><span class="p">:</span> <span class="mf">90.00070000000002</span><span class="p">}</span>
</pre></div>
</div>
<p>Earlier, the sample and orientation were setup on the <code class="docutils literal notranslate"><span class="pre">fourc</span></code> with
these steps:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fourc</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">A_KEV</span> <span class="o">/</span> <span class="mf">1.54</span><span class="p">)</span>
<span class="n">a0</span> <span class="o">=</span> <span class="mf">5.4310196</span>
<span class="n">fourc</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">new_sample</span><span class="p">(</span><span class="s2">&quot;silicon&quot;</span><span class="p">,</span> <span class="n">lattice</span><span class="o">=</span><span class="p">(</span><span class="n">a0</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
<span class="n">fourc</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">compute_UB</span><span class="p">(</span>
    <span class="n">fourc</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">add_reflection</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">145.451</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">69.0966</span><span class="p">)),</span>
    <span class="n">fourc</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">add_reflection</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">145.451</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mf">69.0966</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
<p>We have all the information here to repeat those steps for the
<code class="docutils literal notranslate"><span class="pre">orange</span></code> diffractometer (same <code class="docutils literal notranslate"><span class="pre">E4CV</span></code> geometry).</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>term</p></th>
<th class="head"><p>recovered orientation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>energy</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">info[&quot;fourc&quot;][&quot;energy&quot;]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>sample name</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">info[&quot;fourc&quot;][&quot;sample_name&quot;]</span></code></p></td>
</tr>
<tr class="row-even"><td><p>sample lattice</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">info[&quot;fourc&quot;][&quot;lattice&quot;]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>first reflection</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">info[&quot;fou</span>
<span class="pre">rc&quot;][&quot;reflections_details&quot;][0]</span></code>:
<code class="docutils literal notranslate"><span class="pre">[&quot;reflection&quot;]</span></code> and
<code class="docutils literal notranslate"><span class="pre">[&quot;position&quot;]</span></code></p></td>
</tr>
<tr class="row-even"><td><p>second reflection</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">info[&quot;fou</span>
<span class="pre">rc&quot;][&quot;reflections_details&quot;][1]</span></code>:
<code class="docutils literal notranslate"><span class="pre">[&quot;reflection&quot;]</span></code> and
<code class="docutils literal notranslate"><span class="pre">[&quot;position&quot;]</span></code></p></td>
</tr>
</tbody>
</table>
<p>The energy and sample info are ready to use. Both the constraints and
reflections info will take a bit of reformatting.</p>
<p>Due to issues with how bluesky writes data, the constraints info was
written with all floating point numbers (including the boolean for the
<code class="docutils literal notranslate"><span class="pre">fit</span></code> parameter).</p>
<ol class="arabic simple">
<li><p>The order of constraints is exactly the order of the <code class="docutils literal notranslate"><span class="pre">_reals</span></code> so
those associations and conversions must be handled.</p></li>
<li><p>We can’t just use the dictionaries for <code class="docutils literal notranslate"><span class="pre">reflection</span></code> and
<code class="docutils literal notranslate"><span class="pre">position</span></code> in <code class="docutils literal notranslate"><span class="pre">info</span></code> since order is important and those are
recovered in alphabetical order. That’s why the ordered lists for
<em>pseudo</em> and <em>real</em> positioners have been saved with the orientation
information. Those lists provide the canonical order for <em>any</em>
diffractometer geometry.</p></li>
</ol>
<p><strong>Before restoring</strong>, need to check the target diffractometer to see if
it already has these settings.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;fourc&#39;</span><span class="p">][</span><span class="s1">&#39;energy&#39;</span><span class="p">]</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;fourc&#39;</span><span class="p">][</span><span class="s1">&#39;energy_units&#39;</span><span class="p">]</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;fourc&#39;</span><span class="p">][</span><span class="s1">&#39;energy_offset&#39;</span><span class="p">]</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">orange</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">orange</span><span class="o">.</span><span class="n">energy_units</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">orange</span><span class="o">.</span><span class="n">energy_offset</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;fourc&#39;</span><span class="p">][</span><span class="s1">&#39;sample_name&#39;</span><span class="p">]</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">orange</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">_samples</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">orange</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">_samples</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;fourc&#39;</span><span class="p">][</span><span class="s1">&#39;energy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">8.050922077922078</span>
<span class="n">info</span><span class="p">[</span><span class="s1">&#39;fourc&#39;</span><span class="p">][</span><span class="s1">&#39;energy_units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;keV&#39;</span>
<span class="n">info</span><span class="p">[</span><span class="s1">&#39;fourc&#39;</span><span class="p">][</span><span class="s1">&#39;energy_offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">orange</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">=</span> <span class="mf">8.0</span>
<span class="n">orange</span><span class="o">.</span><span class="n">energy_units</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">=</span> <span class="s1">&#39;keV&#39;</span>
<span class="n">orange</span><span class="o">.</span><span class="n">energy_offset</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">info</span><span class="p">[</span><span class="s1">&#39;fourc&#39;</span><span class="p">][</span><span class="s1">&#39;sample_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;silicon&#39;</span>
<span class="nb">list</span><span class="p">(</span><span class="n">orange</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">_samples</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">]</span>

<span class="n">orange</span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">_samples</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;main&#39;</span><span class="p">:</span> <span class="n">HklSample</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;main&#39;</span><span class="p">,</span> <span class="n">lattice</span><span class="o">=</span><span class="n">LatticeTuple</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mf">1.54</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">1.54</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mf">1.54</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">90.0</span><span class="p">),</span> <span class="n">ux</span><span class="o">=</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;None (internally: ux)&#39;</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mf">180.0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">180.0</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inverted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;Degree&#39;</span><span class="p">),</span> <span class="n">uy</span><span class="o">=</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;None (internally: uy)&#39;</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mf">180.0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">180.0</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inverted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;Degree&#39;</span><span class="p">),</span> <span class="n">uz</span><span class="o">=</span><span class="n">Parameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;None (internally: uz)&#39;</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mf">180.0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">180.0</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inverted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;Degree&#39;</span><span class="p">),</span> <span class="n">U</span><span class="o">=</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]]),</span> <span class="n">UB</span><span class="o">=</span><span class="n">array</span><span class="p">([[</span> <span class="mf">4.07999046e+00</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.49827363e-16</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.49827363e-16</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.00000000e+00</span><span class="p">,</span>  <span class="mf">4.07999046e+00</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.49827363e-16</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.00000000e+00</span><span class="p">,</span>  <span class="mf">0.00000000e+00</span><span class="p">,</span>  <span class="mf">4.07999046e+00</span><span class="p">]]),</span> <span class="n">reflections</span><span class="o">=</span><span class="p">[])}</span>
</pre></div>
</div>
<p>We need to change the energy (units and offset do not need to be
changed), create a new sample, define the two reflections, then compute
<strong>UB</strong>. Then compare that computed <strong>UB</strong> with the recovered value.</p>
<div class="section" id="restore-the-recovered-fourc-orientation-into-orange">
<h2>Restore the recovered <code class="docutils literal notranslate"><span class="pre">fourc</span></code> orientation into <code class="docutils literal notranslate"><span class="pre">orange</span></code><a class="headerlink" href="#restore-the-recovered-fourc-orientation-into-orange" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hkl.util</span> <span class="kn">import</span> <span class="n">restore_orientation</span>
<span class="n">orange</span> <span class="o">=</span> <span class="n">Fourc</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;orange&quot;</span><span class="p">)</span>  <span class="c1"># TODO: remove this line before publishing</span>
<span class="n">restore_orientation</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;fourc&quot;</span><span class="p">],</span> <span class="n">orange</span><span class="p">)</span>
</pre></div>
</div>
<p>Compare the <strong>UB</strong> matrices. (Convert the recovered <strong>UB</strong> matrix to a
numpy array to match the type in the diffractometer. Expect <code class="docutils literal notranslate"><span class="pre">True</span></code> in
all cells of the 3x3 matrix.)</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;fourc&quot;</span><span class="p">][</span><span class="s2">&quot;UB&quot;</span><span class="p">])</span> <span class="si">= }</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">orange</span><span class="o">.</span><span class="n">UB</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># finally, compare the two matrices cell by cell</span>
<span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;fourc&quot;</span><span class="p">][</span><span class="s2">&quot;UB&quot;</span><span class="p">])</span> <span class="o">==</span> <span class="n">orange</span><span class="o">.</span><span class="n">UB</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;fourc&quot;</span><span class="p">][</span><span class="s2">&quot;UB&quot;</span><span class="p">])</span> <span class="o">=</span> <span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">1.41342870e-05</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.15690713e+00</span><span class="p">,</span>  <span class="mf">7.08409963e-17</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.00000000e+00</span><span class="p">,</span>  <span class="mf">0.00000000e+00</span><span class="p">,</span>  <span class="mf">1.15690713e+00</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">1.15690713e+00</span><span class="p">,</span>  <span class="mf">1.41342870e-05</span><span class="p">,</span>  <span class="mf">7.08392653e-17</span><span class="p">]])</span>
<span class="n">orange</span><span class="o">.</span><span class="n">UB</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">=</span> <span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">1.41342870e-05</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.15690713e+00</span><span class="p">,</span>  <span class="mf">7.08409963e-17</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.00000000e+00</span><span class="p">,</span>  <span class="mf">0.00000000e+00</span><span class="p">,</span>  <span class="mf">1.15690713e+00</span><span class="p">],</span>
       <span class="p">[</span><span class="o">-</span><span class="mf">1.15690713e+00</span><span class="p">,</span>  <span class="mf">1.41342870e-05</span><span class="p">,</span>  <span class="mf">7.08392653e-17</span><span class="p">]])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">array</span><span class="p">([[</span> <span class="kc">True</span><span class="p">,</span>  <span class="kc">True</span><span class="p">,</span>  <span class="kc">True</span><span class="p">],</span>
       <span class="p">[</span> <span class="kc">True</span><span class="p">,</span>  <span class="kc">True</span><span class="p">,</span>  <span class="kc">True</span><span class="p">],</span>
       <span class="p">[</span> <span class="kc">True</span><span class="p">,</span>  <span class="kc">True</span><span class="p">,</span>  <span class="kc">True</span><span class="p">]])</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">orange</span><span class="o">.</span><span class="n">pa</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">=====================</span> <span class="o">===========================================================================</span>
<span class="n">term</span>                  <span class="n">value</span>
<span class="o">=====================</span> <span class="o">===========================================================================</span>
<span class="n">diffractometer</span>        <span class="n">orange</span>
<span class="n">geometry</span>              <span class="n">E4CV</span>
<span class="k">class</span>                 <span class="nc">Fourc</span>
<span class="n">energy</span> <span class="p">(</span><span class="n">keV</span><span class="p">)</span>          <span class="mf">8.05092</span>
<span class="n">wavelength</span> <span class="p">(</span><span class="n">angstrom</span><span class="p">)</span> <span class="mf">1.54000</span>
<span class="n">calc</span> <span class="n">engine</span>           <span class="n">hkl</span>
<span class="n">mode</span>                  <span class="n">bissector</span>
<span class="n">positions</span>             <span class="o">=====</span> <span class="o">=======</span>
                      <span class="n">name</span>  <span class="n">value</span>
                      <span class="o">=====</span> <span class="o">=======</span>
                      <span class="n">omega</span> <span class="mf">0.00000</span>
                      <span class="n">chi</span>   <span class="mf">0.00000</span>
                      <span class="n">phi</span>   <span class="mf">0.00000</span>
                      <span class="n">tth</span>   <span class="mf">0.00000</span>
                      <span class="o">=====</span> <span class="o">=======</span>
<span class="n">constraints</span>           <span class="o">=====</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
                      <span class="n">axis</span>  <span class="n">low_limit</span> <span class="n">high_limit</span> <span class="n">value</span> <span class="n">fit</span>
                      <span class="o">=====</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
                      <span class="n">omega</span> <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">chi</span>   <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">phi</span>   <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="n">tth</span>   <span class="o">-</span><span class="mf">180.0</span>    <span class="mf">180.0</span>      <span class="mf">0.0</span>   <span class="kc">True</span>
                      <span class="o">=====</span> <span class="o">=========</span> <span class="o">==========</span> <span class="o">=====</span> <span class="o">====</span>
<span class="n">sample</span><span class="p">:</span> <span class="n">silicon</span>       <span class="o">=================</span> <span class="o">=========================================================</span>
                      <span class="n">term</span>              <span class="n">value</span>
                      <span class="o">=================</span> <span class="o">=========================================================</span>
                      <span class="n">unit</span> <span class="n">cell</span> <span class="n">edges</span>   <span class="n">a</span><span class="o">=</span><span class="mf">5.4310196</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">5.4310196</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mf">5.4310196</span>
                      <span class="n">unit</span> <span class="n">cell</span> <span class="n">angles</span>  <span class="n">alpha</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">90.0</span>
                      <span class="n">ref</span> <span class="mi">1</span> <span class="p">(</span><span class="n">hkl</span><span class="p">)</span>       <span class="n">h</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">0.0</span>
                      <span class="n">ref</span> <span class="mi">1</span> <span class="n">positioners</span> <span class="n">omega</span><span class="o">=-</span><span class="mf">145.45100</span><span class="p">,</span> <span class="n">chi</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">tth</span><span class="o">=</span><span class="mf">69.09660</span>
                      <span class="n">ref</span> <span class="mi">2</span> <span class="p">(</span><span class="n">hkl</span><span class="p">)</span>       <span class="n">h</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mf">0.0</span>
                      <span class="n">ref</span> <span class="mi">2</span> <span class="n">positioners</span> <span class="n">omega</span><span class="o">=-</span><span class="mf">145.45100</span><span class="p">,</span> <span class="n">chi</span><span class="o">=</span><span class="mf">0.00000</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="mf">90.00000</span><span class="p">,</span> <span class="n">tth</span><span class="o">=</span><span class="mf">69.09660</span>
                      <span class="p">[</span><span class="n">U</span><span class="p">]</span>               <span class="p">[[</span><span class="o">-</span><span class="mf">1.22173048e-05</span> <span class="o">-</span><span class="mf">1.00000000e+00</span>  <span class="mf">0.00000000e+00</span><span class="p">]</span>
                                         <span class="p">[</span> <span class="mf">0.00000000e+00</span>  <span class="mf">0.00000000e+00</span>  <span class="mf">1.00000000e+00</span><span class="p">]</span>
                                         <span class="p">[</span><span class="o">-</span><span class="mf">1.00000000e+00</span>  <span class="mf">1.22173048e-05</span>  <span class="mf">0.00000000e+00</span><span class="p">]]</span>
                      <span class="p">[</span><span class="n">UB</span><span class="p">]</span>              <span class="p">[[</span><span class="o">-</span><span class="mf">1.41342870e-05</span> <span class="o">-</span><span class="mf">1.15690713e+00</span>  <span class="mf">7.08409963e-17</span><span class="p">]</span>
                                         <span class="p">[</span> <span class="mf">0.00000000e+00</span>  <span class="mf">0.00000000e+00</span>  <span class="mf">1.15690713e+00</span><span class="p">]</span>
                                         <span class="p">[</span><span class="o">-</span><span class="mf">1.15690713e+00</span>  <span class="mf">1.41342870e-05</span>  <span class="mf">7.08392653e-17</span><span class="p">]]</span>
                      <span class="o">=================</span> <span class="o">=========================================================</span>
<span class="o">=====================</span> <span class="o">===========================================================================</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">pyRestTable</span><span class="o">.</span><span class="n">rest_table</span><span class="o">.</span><span class="n">Table</span> <span class="n">at</span> <span class="mh">0x7fe3a8de25b0</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="try-to-restore-the-recovered-fourc-orientation-in-kappa">
<h2>Try to restore the recovered <code class="docutils literal notranslate"><span class="pre">fourc</span></code> orientation in <code class="docutils literal notranslate"><span class="pre">kappa</span></code><a class="headerlink" href="#try-to-restore-the-recovered-fourc-orientation-in-kappa" title="Permalink to this headline">¶</a></h2>
<p>Try to share a recovered orientation from <code class="docutils literal notranslate"><span class="pre">fourc</span></code>, <code class="docutils literal notranslate"><span class="pre">scan_id=2</span></code> with
the <code class="docutils literal notranslate"><span class="pre">kappa</span></code> diffractometer.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">run_orientation_info</span><span class="p">(</span><span class="n">cat</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">restore_orientation</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;fourc&quot;</span><span class="p">],</span> <span class="n">kappa</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">exc</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">exc</span> <span class="o">=</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Geometries do not match: Orientation=E4CV, kappa=K4CV, will not restore.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Restore is not be possible since the geometries are not identical. (To
avoid stopping the notebook with an exception here, we used a
<code class="docutils literal notranslate"><span class="pre">try..except</span></code> clause.)</p>
</div>
<div class="section" id="try-to-create-a-sample-when-it-already-exists">
<h2>Try to create a sample when it already exists<a class="headerlink" href="#try-to-create-a-sample-when-it-already-exists" title="Permalink to this headline">¶</a></h2>
<p>Then, try to restore the sample and lattice when they already exist.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hkl.util</span> <span class="kn">import</span> <span class="n">restore_sample</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">kappa</span><span class="o">.</span><span class="n">sample_name</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">run_orientation_info</span><span class="p">(</span><span class="n">cat</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">restore_sample</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;fourc&quot;</span><span class="p">],</span> <span class="n">kappa</span><span class="p">)</span>
    <span class="n">kappa</span><span class="o">.</span><span class="n">wh</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">exc</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kappa</span><span class="o">.</span><span class="n">sample_name</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">=</span> <span class="s1">&#39;silicon&#39;</span>
<span class="n">exc</span> <span class="o">=</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Sample &#39;silicon&#39; already exists in kappa.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="restore-the-energy">
<h2>Restore the energy<a class="headerlink" href="#restore-the-energy" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hkl.util</span> <span class="kn">import</span> <span class="n">restore_energy</span>

<span class="c1"># make a new kappa, then restore the sample</span>
<span class="n">kappa</span> <span class="o">=</span> <span class="n">Kappa</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;kappa&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">kappa</span><span class="o">.</span><span class="n">sample_name</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">run_orientation_info</span><span class="p">(</span><span class="n">cat</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">restore_energy</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;fourc&quot;</span><span class="p">],</span> <span class="n">kappa</span><span class="p">)</span>
    <span class="n">restore_sample</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;fourc&quot;</span><span class="p">],</span> <span class="n">kappa</span><span class="p">)</span>
    <span class="n">kappa</span><span class="o">.</span><span class="n">wh</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">exc</span> <span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kappa</span><span class="o">.</span><span class="n">sample_name</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">=</span> <span class="s1">&#39;main&#39;</span>
<span class="o">=====================</span> <span class="o">=========</span> <span class="o">=========</span>
<span class="n">term</span>                  <span class="n">value</span>     <span class="n">axis_type</span>
<span class="o">=====================</span> <span class="o">=========</span> <span class="o">=========</span>
<span class="n">diffractometer</span>        <span class="n">kappa</span>
<span class="n">sample</span> <span class="n">name</span>           <span class="n">silicon</span>
<span class="n">energy</span> <span class="p">(</span><span class="n">keV</span><span class="p">)</span>          <span class="mf">8.05092</span>
<span class="n">wavelength</span> <span class="p">(</span><span class="n">angstrom</span><span class="p">)</span> <span class="mf">1.54000</span>
<span class="n">calc</span> <span class="n">engine</span>           <span class="n">hkl</span>
<span class="n">mode</span>                  <span class="n">bissector</span>
<span class="n">h</span>                     <span class="mf">0.0</span>       <span class="n">pseudo</span>
<span class="n">k</span>                     <span class="mf">0.0</span>       <span class="n">pseudo</span>
<span class="n">l</span>                     <span class="mf">0.0</span>       <span class="n">pseudo</span>
<span class="n">komega</span>                <span class="mi">0</span>         <span class="n">real</span>
<span class="n">kappa</span>                 <span class="mi">0</span>         <span class="n">real</span>
<span class="n">kphi</span>                  <span class="mi">0</span>         <span class="n">real</span>
<span class="n">tth</span>                   <span class="mi">0</span>         <span class="n">real</span>
<span class="o">=====================</span> <span class="o">=========</span> <span class="o">=========</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="tst_UB_in_stream.html" class="btn btn-neutral float-right" title="WIP: save reflection information in stream" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="var_nslsii_tardis.html" class="btn btn-neutral float-left" title="NSLS-II TARDIS Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2014-2021, Brookhaven National Laboratory.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>