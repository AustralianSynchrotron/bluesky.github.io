

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Let Us Do the Bookkeeping For You &mdash; Bluesky Tutorials  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Epics Signal" href="Epics Signal.html" />
    <link rel="prev" title="Access Saved Data" href="Access Saved Data.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Bluesky Tutorials
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Basic Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Hello Python and Jupyter.html">Hello Python and Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hello Bluesky.html">Hello Bluesky: Reading detectors and scanning</a></li>
<li class="toctree-l1"><a class="reference internal" href="Access Saved Data.html">Access Saved Data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Let Us Do the Bookkeeping For You</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Generate-a-Summary-Report">Generate a Summary Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="#If-the-user-tells-us-more,-our-report-can-get-richer">If the user tells us more, our report can get richer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Filtering">Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="#What-about-getting-the-data-itself?">What about getting the data itself?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#So-what’s-happening-inside-print(...)?">So what’s happening inside <code class="docutils literal notranslate"><span class="pre">print(...)</span></code>?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#“f-strings”-(new-Python-3.6!)">“f-strings” (new Python 3.6!)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Dictionary-lookup-with-defaults">Dictionary lookup with defaults</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list--&gt;-comma-separated-string">list -&gt; comma-separated string</a></li>
<li class="toctree-l3"><a class="reference internal" href="#time-munging">time-munging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#putting-it-all-together…">putting it all together…</a></li>
<li class="toctree-l3"><a class="reference internal" href="#finishing-touch:-white-space">finishing touch: white space</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Exercise">Exercise</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">For Controls Engineers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Epics Signal.html">Epics Signal</a></li>
<li class="toctree-l1"><a class="reference internal" href="Anatomy of a Device.html">Anatomy of a Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="Flyer Basics.html">Flyer Basics</a></li>
</ul>
<p class="caption"><span class="caption-text">For Scientists</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Process Tabular Data with Pandas.html">Process Tabular Data with Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="Slice and Interpolate Image Data.html">Slice and Interpolate Image Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="Higher Dimensional Data.html">Higher Dimensional Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="Multi-dimensional Coordinates.html">Multi-dimensional Coordinates</a></li>
<li class="toctree-l1"><a class="reference internal" href="Export data to files with Suitcase.html">Export data to files with Suitcase</a></li>
</ul>
<p class="caption"><span class="caption-text">Applied Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="X-ray Absorption Fine Structure/index.html">X-ray Absorption Fine Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="Powder Diffraction/index.html">Powder Diffraction</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Bluesky Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Let Us Do the Bookkeeping For You</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Let Us Do the Bookkeeping For You.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You can run this notebook in a <a class="reference external" href="https://mybinder.org/v2/gh/bluesky/tutorials/master?urlpath=lab/tree/Let%20Us%20Do%20the%20Bookkeeping%20For%20You.ipynb">live session</a> <a class="reference external" href="https://mybinder.org/v2/gh/bluesky/tutorials/master?urlpath=lab/tree/Let%20Us%20Do%20the%20Bookkeeping%20For%20You.ipynb"><img alt="Binder" src="https://mybinder.org/badge.svg" /></a>
or view it <a class="reference external" href="https://nbviewer.jupyter.org/github/bluesky/tutorials/blob/master/Let%20Us%20Do%20the%20Bookkeeping%20For%20You.ipynb">on nbviewer</a>
or <a class="reference external" href="https://github.com/bluesky/tutorials/blob/master/Let%20Us%20Do%20the%20Bookkeeping%20For%20You.ipynb">GitHub</a>.</p>
</div>
<div class="section" id="Let-Us-Do-the-Bookkeeping-For-You">
<h1>Let Us Do the Bookkeeping For You<a class="headerlink" href="#Let-Us-Do-the-Bookkeeping-For-You" title="Permalink to this headline">¶</a></h1>
<p>In this notebook you will:</p>
<ul class="simple">
<li><p>Run some simulated experiments and then access the metadata about them.</p></li>
<li><p>Use that metadata to generate a summary report.</p></li>
<li><p>Use it filter search results.</p></li>
<li><p>Explore some of Python’s string formatting features in detail.</p></li>
</ul>
<div class="section" id="Configuration">
<h2>Configuration<a class="headerlink" href="#Configuration" title="Permalink to this headline">¶</a></h2>
<p>Below, we will connect to EPICS IOC(s) controlling simulated hardware in lieu of actual motors, detectors. The IOCs should already be running in the background. Run this command to verify that they are running: it should produce output with RUNNING on each line. In the event of a problem, edit this command to replace <code class="docutils literal notranslate"><span class="pre">status</span></code> with <code class="docutils literal notranslate"><span class="pre">restart</span> <span class="pre">all</span></code> and run again.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>supervisorctl -c supervisor/supervisord.conf status
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
decay                            RUNNING   pid 4869, uptime 0:02:12
mini_beamline                    RUNNING   pid 4870, uptime 0:02:12
random_walk                      RUNNING   pid 4871, uptime 0:02:12
random_walk_horiz                RUNNING   pid 4872, uptime 0:02:12
random_walk_vert                 RUNNING   pid 4873, uptime 0:02:12
simple                           RUNNING   pid 4874, uptime 0:02:12
thermo_sim                       RUNNING   pid 4875, uptime 0:02:12
trigger_with_pc                  RUNNING   pid 4876, uptime 0:02:12
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">run</span> scripts/beamline_configuration.py
</pre></div>
</div>
</div>
</div>
<div class="section" id="Generate-a-Summary-Report">
<h2>Generate a Summary Report<a class="headerlink" href="#Generate-a-Summary-Report" title="Permalink to this headline">¶</a></h2>
<p>Acquire some data like so. The details of what we are doing here are not important for what follows. If you want to know more about data acquisition, start with <a class="reference internal" href="Hello Bluesky.html"><span class="doc">Hello Bluesky</span></a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">RE</span><span class="p">(</span><span class="n">count</span><span class="p">([</span><span class="n">ph</span><span class="p">]))</span>
<span class="n">RE</span><span class="p">(</span><span class="n">count</span><span class="p">([</span><span class="n">ph</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">slit</span><span class="p">],</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">edge</span><span class="p">],</span> <span class="n">motor_edge</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
<span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">edge</span><span class="p">],</span> <span class="n">motor_edge</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">ph</span><span class="p">],</span> <span class="n">motor_ph</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">slit</span><span class="p">],</span> <span class="n">motor_slit</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 13     Time: 2020-05-18 20:36:41
Persistent Unique Scan ID: &#39;970defb9-3d50-4383-a050-e73d9c8cbb1e&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+
|   seq_num |       time |     ph_det |
+-----------+------------+------------+
|         1 | 20:36:41.6 |      13001 |
+-----------+------------+------------+
generator count [&#39;970defb9&#39;] (scan num: 13)





Transient Scan ID: 14     Time: 2020-05-18 20:36:41
Persistent Unique Scan ID: &#39;f200bfbd-e77c-4986-8d81-8c9e8875958b&#39;
New stream: &#39;primary&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "3e4c74812dbd4b00aa96eff57990ad43"}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+-----------+------------+------------+------------+------------+
|   seq_num |       time |   slit_det |     ph_det |   edge_det |
+-----------+------------+------------+------------+------------+
|         1 | 20:36:42.0 |      95238 |      13033 |        226 |
|         2 | 20:36:42.1 |      94778 |      12997 |        244 |
|         3 | 20:36:42.1 |      95202 |      12951 |        240 |
+-----------+------------+------------+------------+------------+
generator count [&#39;f200bfbd&#39;] (scan num: 14)





Transient Scan ID: 15     Time: 2020-05-18 20:36:42
Persistent Unique Scan ID: &#39;b5a1b882-b1ed-48ff-b09c-d798ada26da7&#39;
New stream: &#39;primary&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "b058fe4c26224f8f80775f0577668be3"}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+-----------+------------+------------+------------+
|   seq_num |       time | motor_edge |   edge_det |
+-----------+------------+------------+------------+
|         1 | 20:36:42.6 |    -10.000 |          0 |
|         2 | 20:36:42.6 |     -8.571 |          0 |
|         3 | 20:36:42.6 |     -7.143 |          0 |
|         4 | 20:36:42.6 |     -5.714 |          0 |
|         5 | 20:36:42.7 |     -4.286 |          0 |
|         6 | 20:36:42.7 |     -2.857 |          0 |
|         7 | 20:36:42.7 |     -1.429 |          9 |
|         8 | 20:36:42.7 |      0.000 |        229 |
|         9 | 20:36:42.7 |      1.429 |       2212 |
|        10 | 20:36:42.7 |      2.857 |      11120 |
|        11 | 20:36:42.7 |      4.286 |      33490 |
|        12 | 20:36:42.7 |      5.714 |      64577 |
|        13 | 20:36:42.7 |      7.143 |      87679 |
|        14 | 20:36:42.7 |      8.571 |      96437 |
|        15 | 20:36:42.8 |     10.000 |      98170 |
+-----------+------------+------------+------------+
generator scan [&#39;b5a1b882&#39;] (scan num: 15)





Transient Scan ID: 16     Time: 2020-05-18 20:36:42
Persistent Unique Scan ID: &#39;57e41e0c-6895-4cc9-be33-1d5e4b0face1&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+------------+
|   seq_num |       time | motor_edge |   edge_det |
+-----------+------------+------------+------------+
|         1 | 20:36:43.1 |     -1.000 |         26 |
|         2 | 20:36:43.1 |      0.000 |        247 |
|         3 | 20:36:43.2 |      1.000 |       1152 |
|         4 | 20:36:43.2 |      2.000 |       4612 |
|         5 | 20:36:43.2 |      3.000 |      12882 |
+-----------+------------+------------+------------+
generator scan [&#39;57e41e0c&#39;] (scan num: 16)





Transient Scan ID: 17     Time: 2020-05-18 20:36:43
Persistent Unique Scan ID: &#39;65f96e1e-6af1-47bc-bcd9-25c87e5a35a7&#39;
New stream: &#39;primary&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "33f3b77cc1a04f16a52e5fd89d5ce8b2"}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+-----------+------------+------------+------------+
|   seq_num |       time |   motor_ph |     ph_det |
+-----------+------------+------------+------------+
|         1 | 20:36:43.6 |     -1.000 |     101238 |
|         2 | 20:36:43.6 |      0.000 |     104334 |
|         3 | 20:36:43.7 |      1.000 |     102894 |
|         4 | 20:36:43.7 |      2.000 |      97136 |
|         5 | 20:36:43.7 |      3.000 |      87065 |
+-----------+------------+------------+------------+
generator scan [&#39;65f96e1e&#39;] (scan num: 17)





Transient Scan ID: 18     Time: 2020-05-18 20:36:43
Persistent Unique Scan ID: &#39;e5114b92-a5a7-4919-8711-e7ebb77e0f55&#39;
New stream: &#39;primary&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "e2a00271bcd3430c98e0c7b1a0d93c4f"}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+-----------+------------+------------+------------+
|   seq_num |       time | motor_slit |   slit_det |
+-----------+------------+------------+------------+
|         1 | 20:36:44.2 |    -10.000 |       8169 |
|         2 | 20:36:44.2 |     -8.571 |      28497 |
|         3 | 20:36:44.2 |     -7.143 |      60220 |
|         4 | 20:36:44.2 |     -5.714 |      87803 |
|         5 | 20:36:44.3 |     -4.286 |     101099 |
|         6 | 20:36:44.3 |     -2.857 |     103557 |
|         7 | 20:36:44.3 |     -1.429 |     104962 |
|         8 | 20:36:44.3 |      0.000 |     104632 |
|         9 | 20:36:44.3 |      1.429 |     104449 |
|        10 | 20:36:44.3 |      2.857 |     103068 |
|        11 | 20:36:44.4 |      4.286 |      99953 |
|        12 | 20:36:44.4 |      5.714 |      87067 |
|        13 | 20:36:44.4 |      7.143 |      60514 |
|        14 | 20:36:44.4 |      8.571 |      28366 |
|        15 | 20:36:44.4 |     10.000 |       8203 |
+-----------+------------+------------+------------+
generator scan [&#39;e5114b92&#39;] (scan num: 18)



</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&#39;e5114b92-a5a7-4919-8711-e7ebb77e0f55&#39;,)
</pre></div></div>
</div>
<p>Here a some code that prints a summary with some of the metadata automatically captured by Bluesky. Note the time filter added to the databroker object (db) - see <a class="reference external" href="#Filtering">Filtering</a> for more about this feature.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">an_hour_ago</span> <span class="o">=</span> <span class="n">now</span> <span class="o">-</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span><span class="mi">24</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HH:MM  plan_name  detectors      motors&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">db</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="n">an_hour_ago</span><span class="p">):</span>
    <span class="n">md</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">start</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span><span class="si">:</span><span class="s2">%H:%M</span><span class="si">}</span><span class="s2">  &quot;</span>
          <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;plan_name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">11</span><span class="si">}</span><span class="s2">&quot;</span>
          <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
          <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;motors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
HH:MM  plan_name  detectors      motors
20:36  count      ph
20:36  scan       edge           motor_edge
20:36  scan       edge           motor_edge
20:36  count      ph,edge,slit
20:36  scan       slit           motor_slit
20:36  scan       ph             motor_ph
</pre></div></div>
</div>
<p>Let’s add one more example data, a run that failed because of a user error.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># THIS IS EXPECTED TO CREATE AN ERROR.</span>

<span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">motor_ph</span><span class="p">],</span> <span class="n">ph</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>  <span class="c1"># oops I tried to use a detector as a motor</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Run aborted
Traceback (most recent call last):
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/run_engine.py&#34;, line 1353, in _run
    msg = self._plan_stack[-1].send(resp)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 1307, in __call__
    return (yield from plan)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 1160, in baseline_wrapper
    return (yield from plan)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 803, in monitor_during_wrapper
    return (yield from plan2)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 170, in plan_mutator
    raise ex
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 123, in plan_mutator
    msg = plan_stack[-1].send(ret)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 170, in plan_mutator
    raise ex
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 123, in plan_mutator
    msg = plan_stack[-1].send(ret)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 861, in fly_during_wrapper
    return (yield from plan2)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 170, in plan_mutator
    raise ex
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 123, in plan_mutator
    msg = plan_stack[-1].send(ret)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 170, in plan_mutator
    raise ex
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 123, in plan_mutator
    msg = plan_stack[-1].send(ret)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/plans.py&#34;, line 1101, in scan
    per_step=per_step, md=_md))
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/plans.py&#34;, line 995, in scan_nd
    return (yield from inner_scan_nd())
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/utils.py&#34;, line 1046, in dec_inner
    return (yield from plan)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 952, in stage_wrapper
    return (yield from finalize_wrapper(inner(), unstage_devices()))
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 509, in finalize_wrapper
    ret = yield from plan
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 950, in inner
    return (yield from plan)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/utils.py&#34;, line 1046, in dec_inner
    return (yield from plan)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 327, in run_wrapper
    else_plan=close_run)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 575, in contingency_wrapper
    ret = yield from plan
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/plans.py&#34;, line 993, in inner_scan_nd
    yield from per_step(detectors, step, pos_cache)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/plan_stubs.py&#34;, line 1114, in one_nd_step
    yield from move_per_step(step, pos_cache)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/plan_stubs.py&#34;, line 1084, in move_per_step
    yield Msg(&#39;set&#39;, motor, pos, group=grp)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 195, in plan_mutator
    inner_ret = yield msg
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 195, in plan_mutator
    inner_ret = yield msg
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py&#34;, line 195, in plan_mutator
    inner_ret = yield msg
  [Previous line repeated 1 more time]
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/run_engine.py&#34;, line 1413, in _run
    new_response = await coro(msg)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/run_engine.py&#34;, line 1909, in _set
    ret = msg.obj.set(*msg.args, **kwargs)
  File &#34;/home/travis/virtualenv/python3.7.1/lib/python3.7/site-packages/ophyd/device.py&#34;, line 1197, in __getattr__
    raise AttributeError(name)
AttributeError: set
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 19     Time: 2020-05-18 20:36:44
Persistent Unique Scan ID: &#39;e04831e7-4850-4095-af96-d2c8e89fd09f&#39;



</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-5-2412d29f338e&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-red-fg"># THIS IS EXPECTED TO CREATE AN ERROR.</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>
<span class="ansi-green-fg">----&gt; 3</span><span class="ansi-red-fg"> </span>RE<span class="ansi-blue-fg">(</span>scan<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">[</span>motor_ph<span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">,</span> ph<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">,</span> <span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">,</span> <span class="ansi-cyan-fg">3</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>  <span class="ansi-red-fg"># oops I tried to use a detector as a motor</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/run_engine.py</span> in <span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">(self, *args, **metadata_kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    793</span>             self<span class="ansi-blue-fg">.</span>_task_fut<span class="ansi-blue-fg">.</span>add_done_callback<span class="ansi-blue-fg">(</span>set_blocking_event<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    794</span>
<span class="ansi-green-fg">--&gt; 795</span><span class="ansi-red-fg">         </span>self<span class="ansi-blue-fg">.</span>_resume_task<span class="ansi-blue-fg">(</span>init_func<span class="ansi-blue-fg">=</span>_build_task<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    796</span>
<span class="ansi-green-intense-fg ansi-bold">    797</span>         <span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>_interrupted<span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/run_engine.py</span> in <span class="ansi-cyan-fg">_resume_task</span><span class="ansi-blue-fg">(self, init_func)</span>
<span class="ansi-green-intense-fg ansi-bold">    917</span>                     if (exc is not None
<span class="ansi-green-intense-fg ansi-bold">    918</span>                             and not isinstance(exc, _RunEnginePanic)):
<span class="ansi-green-fg">--&gt; 919</span><span class="ansi-red-fg">                         </span><span class="ansi-green-fg">raise</span> exc
<span class="ansi-green-intense-fg ansi-bold">    920</span>
<span class="ansi-green-intense-fg ansi-bold">    921</span>     <span class="ansi-green-fg">def</span> install_suspender<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> suspender<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/run_engine.py</span> in <span class="ansi-cyan-fg">_run</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   1486</span>             exit_reason <span class="ansi-blue-fg">=</span> str<span class="ansi-blue-fg">(</span>err<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1487</span>             self<span class="ansi-blue-fg">.</span>log<span class="ansi-blue-fg">.</span>exception<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;Run aborted&#34;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">-&gt; 1488</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">raise</span> err
<span class="ansi-green-intense-fg ansi-bold">   1489</span>         <span class="ansi-green-fg">finally</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">   1490</span>             <span class="ansi-green-fg">if</span> <span class="ansi-green-fg">not</span> exit_reason<span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/run_engine.py</span> in <span class="ansi-cyan-fg">_run</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   1351</span>                     <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">   1352</span>                         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">-&gt; 1353</span><span class="ansi-red-fg">                             </span>msg <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>_plan_stack<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">.</span>send<span class="ansi-blue-fg">(</span>resp<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1354</span>                         <span class="ansi-red-fg"># We have exhausted the top generator</span>
<span class="ansi-green-intense-fg ansi-bold">   1355</span>                         <span class="ansi-green-fg">except</span> StopIteration<span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">(self, plan)</span>
<span class="ansi-green-intense-fg ansi-bold">   1305</span>         plan <span class="ansi-blue-fg">=</span> monitor_during_wrapper<span class="ansi-blue-fg">(</span>plan<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">.</span>monitors<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1306</span>         plan <span class="ansi-blue-fg">=</span> baseline_wrapper<span class="ansi-blue-fg">(</span>plan<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">.</span>baseline<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">-&gt; 1307</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> plan<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1308</span>
<span class="ansi-green-intense-fg ansi-bold">   1309</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">baseline_wrapper</span><span class="ansi-blue-fg">(plan, devices, name)</span>
<span class="ansi-green-intense-fg ansi-bold">   1158</span>     <span class="ansi-green-fg">if</span> <span class="ansi-green-fg">not</span> devices<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">   1159</span>         <span class="ansi-red-fg"># no-op</span>
<span class="ansi-green-fg">-&gt; 1160</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> plan<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1161</span>     <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">   1162</span>         <span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> plan_mutator<span class="ansi-blue-fg">(</span>plan<span class="ansi-blue-fg">,</span> insert_baseline<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">monitor_during_wrapper</span><span class="ansi-blue-fg">(plan, signals)</span>
<span class="ansi-green-intense-fg ansi-bold">    801</span>     plan1 <span class="ansi-blue-fg">=</span> plan_mutator<span class="ansi-blue-fg">(</span>plan<span class="ansi-blue-fg">,</span> insert_after_open<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    802</span>     plan2 <span class="ansi-blue-fg">=</span> plan_mutator<span class="ansi-blue-fg">(</span>plan1<span class="ansi-blue-fg">,</span> insert_before_close<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 803</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> plan2<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    804</span>
<span class="ansi-green-intense-fg ansi-bold">    805</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">plan_mutator</span><span class="ansi-blue-fg">(plan, msg_proc)</span>
<span class="ansi-green-intense-fg ansi-bold">    168</span>                     <span class="ansi-green-fg">continue</span>
<span class="ansi-green-intense-fg ansi-bold">    169</span>                 <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 170</span><span class="ansi-red-fg">                     </span><span class="ansi-green-fg">raise</span> ex
<span class="ansi-green-intense-fg ansi-bold">    171</span>         <span class="ansi-red-fg"># if inserting / mutating, put new generator on the stack</span>
<span class="ansi-green-intense-fg ansi-bold">    172</span>         <span class="ansi-red-fg"># and replace the current msg with the first element from the</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">plan_mutator</span><span class="ansi-blue-fg">(plan, msg_proc)</span>
<span class="ansi-green-intense-fg ansi-bold">    121</span>             ret <span class="ansi-blue-fg">=</span> result_stack<span class="ansi-blue-fg">.</span>pop<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    122</span>             <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 123</span><span class="ansi-red-fg">                 </span>msg <span class="ansi-blue-fg">=</span> plan_stack<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">.</span>send<span class="ansi-blue-fg">(</span>ret<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    124</span>             <span class="ansi-green-fg">except</span> StopIteration <span class="ansi-green-fg">as</span> e<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    125</span>                 <span class="ansi-red-fg"># discard the exhausted generator</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">plan_mutator</span><span class="ansi-blue-fg">(plan, msg_proc)</span>
<span class="ansi-green-intense-fg ansi-bold">    168</span>                     <span class="ansi-green-fg">continue</span>
<span class="ansi-green-intense-fg ansi-bold">    169</span>                 <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 170</span><span class="ansi-red-fg">                     </span><span class="ansi-green-fg">raise</span> ex
<span class="ansi-green-intense-fg ansi-bold">    171</span>         <span class="ansi-red-fg"># if inserting / mutating, put new generator on the stack</span>
<span class="ansi-green-intense-fg ansi-bold">    172</span>         <span class="ansi-red-fg"># and replace the current msg with the first element from the</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">plan_mutator</span><span class="ansi-blue-fg">(plan, msg_proc)</span>
<span class="ansi-green-intense-fg ansi-bold">    121</span>             ret <span class="ansi-blue-fg">=</span> result_stack<span class="ansi-blue-fg">.</span>pop<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    122</span>             <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 123</span><span class="ansi-red-fg">                 </span>msg <span class="ansi-blue-fg">=</span> plan_stack<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">.</span>send<span class="ansi-blue-fg">(</span>ret<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    124</span>             <span class="ansi-green-fg">except</span> StopIteration <span class="ansi-green-fg">as</span> e<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    125</span>                 <span class="ansi-red-fg"># discard the exhausted generator</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">fly_during_wrapper</span><span class="ansi-blue-fg">(plan, flyers)</span>
<span class="ansi-green-intense-fg ansi-bold">    859</span>     plan1 <span class="ansi-blue-fg">=</span> plan_mutator<span class="ansi-blue-fg">(</span>plan<span class="ansi-blue-fg">,</span> insert_after_open<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    860</span>     plan2 <span class="ansi-blue-fg">=</span> plan_mutator<span class="ansi-blue-fg">(</span>plan1<span class="ansi-blue-fg">,</span> insert_before_close<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 861</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> plan2<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    862</span>
<span class="ansi-green-intense-fg ansi-bold">    863</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">plan_mutator</span><span class="ansi-blue-fg">(plan, msg_proc)</span>
<span class="ansi-green-intense-fg ansi-bold">    168</span>                     <span class="ansi-green-fg">continue</span>
<span class="ansi-green-intense-fg ansi-bold">    169</span>                 <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 170</span><span class="ansi-red-fg">                     </span><span class="ansi-green-fg">raise</span> ex
<span class="ansi-green-intense-fg ansi-bold">    171</span>         <span class="ansi-red-fg"># if inserting / mutating, put new generator on the stack</span>
<span class="ansi-green-intense-fg ansi-bold">    172</span>         <span class="ansi-red-fg"># and replace the current msg with the first element from the</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">plan_mutator</span><span class="ansi-blue-fg">(plan, msg_proc)</span>
<span class="ansi-green-intense-fg ansi-bold">    121</span>             ret <span class="ansi-blue-fg">=</span> result_stack<span class="ansi-blue-fg">.</span>pop<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    122</span>             <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 123</span><span class="ansi-red-fg">                 </span>msg <span class="ansi-blue-fg">=</span> plan_stack<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">.</span>send<span class="ansi-blue-fg">(</span>ret<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    124</span>             <span class="ansi-green-fg">except</span> StopIteration <span class="ansi-green-fg">as</span> e<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    125</span>                 <span class="ansi-red-fg"># discard the exhausted generator</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">plan_mutator</span><span class="ansi-blue-fg">(plan, msg_proc)</span>
<span class="ansi-green-intense-fg ansi-bold">    168</span>                     <span class="ansi-green-fg">continue</span>
<span class="ansi-green-intense-fg ansi-bold">    169</span>                 <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 170</span><span class="ansi-red-fg">                     </span><span class="ansi-green-fg">raise</span> ex
<span class="ansi-green-intense-fg ansi-bold">    171</span>         <span class="ansi-red-fg"># if inserting / mutating, put new generator on the stack</span>
<span class="ansi-green-intense-fg ansi-bold">    172</span>         <span class="ansi-red-fg"># and replace the current msg with the first element from the</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">plan_mutator</span><span class="ansi-blue-fg">(plan, msg_proc)</span>
<span class="ansi-green-intense-fg ansi-bold">    121</span>             ret <span class="ansi-blue-fg">=</span> result_stack<span class="ansi-blue-fg">.</span>pop<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    122</span>             <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 123</span><span class="ansi-red-fg">                 </span>msg <span class="ansi-blue-fg">=</span> plan_stack<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">.</span>send<span class="ansi-blue-fg">(</span>ret<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    124</span>             <span class="ansi-green-fg">except</span> StopIteration <span class="ansi-green-fg">as</span> e<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    125</span>                 <span class="ansi-red-fg"># discard the exhausted generator</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/plans.py</span> in <span class="ansi-cyan-fg">scan</span><span class="ansi-blue-fg">(detectors, num, per_step, md, *args)</span>
<span class="ansi-green-intense-fg ansi-bold">   1099</span>
<span class="ansi-green-intense-fg ansi-bold">   1100</span>     return (yield from scan_nd(detectors, full_cycler,
<span class="ansi-green-fg">-&gt; 1101</span><span class="ansi-red-fg">                                per_step=per_step, md=_md))
</span><span class="ansi-green-intense-fg ansi-bold">   1102</span>
<span class="ansi-green-intense-fg ansi-bold">   1103</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/plans.py</span> in <span class="ansi-cyan-fg">scan_nd</span><span class="ansi-blue-fg">(detectors, cycler, per_step, md)</span>
<span class="ansi-green-intense-fg ansi-bold">    993</span>             <span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> per_step<span class="ansi-blue-fg">(</span>detectors<span class="ansi-blue-fg">,</span> step<span class="ansi-blue-fg">,</span> pos_cache<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    994</span>
<span class="ansi-green-fg">--&gt; 995</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> inner_scan_nd<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    996</span>
<span class="ansi-green-intense-fg ansi-bold">    997</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/utils.py</span> in <span class="ansi-cyan-fg">dec_inner</span><span class="ansi-blue-fg">(*inner_args, **inner_kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">   1044</span>                 plan <span class="ansi-blue-fg">=</span> gen_func<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span>inner_args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>inner_kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1045</span>                 plan <span class="ansi-blue-fg">=</span> wrapper<span class="ansi-blue-fg">(</span>plan<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">-&gt; 1046</span><span class="ansi-red-fg">                 </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> plan<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1047</span>             <span class="ansi-green-fg">return</span> dec_inner
<span class="ansi-green-intense-fg ansi-bold">   1048</span>         <span class="ansi-green-fg">return</span> dec

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">stage_wrapper</span><span class="ansi-blue-fg">(plan, devices)</span>
<span class="ansi-green-intense-fg ansi-bold">    950</span>         <span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> plan<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    951</span>
<span class="ansi-green-fg">--&gt; 952</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> finalize_wrapper<span class="ansi-blue-fg">(</span>inner<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> unstage_devices<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    953</span>
<span class="ansi-green-intense-fg ansi-bold">    954</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">finalize_wrapper</span><span class="ansi-blue-fg">(plan, final_plan, pause_for_debug)</span>
<span class="ansi-green-intense-fg ansi-bold">    507</span>     cleanup <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">True</span>
<span class="ansi-green-intense-fg ansi-bold">    508</span>     <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 509</span><span class="ansi-red-fg">         </span>ret <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> plan
<span class="ansi-green-intense-fg ansi-bold">    510</span>     <span class="ansi-green-fg">except</span> GeneratorExit<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    511</span>         cleanup <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">False</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">inner</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">    948</span>     <span class="ansi-green-fg">def</span> inner<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    949</span>         <span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> stage_devices<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 950</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> plan<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    951</span>
<span class="ansi-green-intense-fg ansi-bold">    952</span>     <span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> finalize_wrapper<span class="ansi-blue-fg">(</span>inner<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> unstage_devices<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/utils.py</span> in <span class="ansi-cyan-fg">dec_inner</span><span class="ansi-blue-fg">(*inner_args, **inner_kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">   1044</span>                 plan <span class="ansi-blue-fg">=</span> gen_func<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span>inner_args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>inner_kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1045</span>                 plan <span class="ansi-blue-fg">=</span> wrapper<span class="ansi-blue-fg">(</span>plan<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">-&gt; 1046</span><span class="ansi-red-fg">                 </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> plan<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1047</span>             <span class="ansi-green-fg">return</span> dec_inner
<span class="ansi-green-intense-fg ansi-bold">   1048</span>         <span class="ansi-green-fg">return</span> dec

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">run_wrapper</span><span class="ansi-blue-fg">(plan, md)</span>
<span class="ansi-green-intense-fg ansi-bold">    325</span>     yield from contingency_wrapper(plan,
<span class="ansi-green-intense-fg ansi-bold">    326</span>                                    except_plan<span class="ansi-blue-fg">=</span>except_plan<span class="ansi-blue-fg">,</span>
<span class="ansi-green-fg">--&gt; 327</span><span class="ansi-red-fg">                                    else_plan=close_run)
</span><span class="ansi-green-intense-fg ansi-bold">    328</span>     <span class="ansi-green-fg">return</span> rs_uid
<span class="ansi-green-intense-fg ansi-bold">    329</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">contingency_wrapper</span><span class="ansi-blue-fg">(plan, except_plan, else_plan, final_plan, pause_for_debug)</span>
<span class="ansi-green-intense-fg ansi-bold">    573</span>     cleanup <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">True</span>
<span class="ansi-green-intense-fg ansi-bold">    574</span>     <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 575</span><span class="ansi-red-fg">         </span>ret <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> plan
<span class="ansi-green-intense-fg ansi-bold">    576</span>     <span class="ansi-green-fg">except</span> GeneratorExit<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    577</span>         cleanup <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">False</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/plans.py</span> in <span class="ansi-cyan-fg">inner_scan_nd</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">    991</span>     <span class="ansi-green-fg">def</span> inner_scan_nd<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    992</span>         <span class="ansi-green-fg">for</span> step <span class="ansi-green-fg">in</span> list<span class="ansi-blue-fg">(</span>cycler<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 993</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> per_step<span class="ansi-blue-fg">(</span>detectors<span class="ansi-blue-fg">,</span> step<span class="ansi-blue-fg">,</span> pos_cache<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    994</span>
<span class="ansi-green-intense-fg ansi-bold">    995</span>     <span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">(</span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> inner_scan_nd<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/plan_stubs.py</span> in <span class="ansi-cyan-fg">one_nd_step</span><span class="ansi-blue-fg">(detectors, step, pos_cache, take_reading)</span>
<span class="ansi-green-intense-fg ansi-bold">   1112</span>     &#34;&#34;&#34;
<span class="ansi-green-intense-fg ansi-bold">   1113</span>     motors <span class="ansi-blue-fg">=</span> step<span class="ansi-blue-fg">.</span>keys<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">-&gt; 1114</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> move_per_step<span class="ansi-blue-fg">(</span>step<span class="ansi-blue-fg">,</span> pos_cache<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1115</span>     <span class="ansi-green-fg">yield</span> <span class="ansi-green-fg">from</span> take_reading<span class="ansi-blue-fg">(</span>list<span class="ansi-blue-fg">(</span>detectors<span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">+</span> list<span class="ansi-blue-fg">(</span>motors<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1116</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/plan_stubs.py</span> in <span class="ansi-cyan-fg">move_per_step</span><span class="ansi-blue-fg">(step, pos_cache)</span>
<span class="ansi-green-intense-fg ansi-bold">   1082</span>             <span class="ansi-red-fg"># This step does not move this motor.</span>
<span class="ansi-green-intense-fg ansi-bold">   1083</span>             <span class="ansi-green-fg">continue</span>
<span class="ansi-green-fg">-&gt; 1084</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">yield</span> Msg<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;set&#39;</span><span class="ansi-blue-fg">,</span> motor<span class="ansi-blue-fg">,</span> pos<span class="ansi-blue-fg">,</span> group<span class="ansi-blue-fg">=</span>grp<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1085</span>         pos_cache<span class="ansi-blue-fg">[</span>motor<span class="ansi-blue-fg">]</span> <span class="ansi-blue-fg">=</span> pos
<span class="ansi-green-intense-fg ansi-bold">   1086</span>     <span class="ansi-green-fg">yield</span> Msg<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;wait&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> group<span class="ansi-blue-fg">=</span>grp<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">plan_mutator</span><span class="ansi-blue-fg">(plan, msg_proc)</span>
<span class="ansi-green-intense-fg ansi-bold">    193</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    194</span>             <span class="ansi-red-fg"># yield out the &#39;current message&#39; and collect the return</span>
<span class="ansi-green-fg">--&gt; 195</span><span class="ansi-red-fg">             </span>inner_ret <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">yield</span> msg
<span class="ansi-green-intense-fg ansi-bold">    196</span>         <span class="ansi-green-fg">except</span> GeneratorExit<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    197</span>             <span class="ansi-red-fg"># special case GeneratorExit.  We must clean up all of our plans</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">plan_mutator</span><span class="ansi-blue-fg">(plan, msg_proc)</span>
<span class="ansi-green-intense-fg ansi-bold">    193</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    194</span>             <span class="ansi-red-fg"># yield out the &#39;current message&#39; and collect the return</span>
<span class="ansi-green-fg">--&gt; 195</span><span class="ansi-red-fg">             </span>inner_ret <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">yield</span> msg
<span class="ansi-green-intense-fg ansi-bold">    196</span>         <span class="ansi-green-fg">except</span> GeneratorExit<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    197</span>             <span class="ansi-red-fg"># special case GeneratorExit.  We must clean up all of our plans</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">plan_mutator</span><span class="ansi-blue-fg">(plan, msg_proc)</span>
<span class="ansi-green-intense-fg ansi-bold">    193</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    194</span>             <span class="ansi-red-fg"># yield out the &#39;current message&#39; and collect the return</span>
<span class="ansi-green-fg">--&gt; 195</span><span class="ansi-red-fg">             </span>inner_ret <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">yield</span> msg
<span class="ansi-green-intense-fg ansi-bold">    196</span>         <span class="ansi-green-fg">except</span> GeneratorExit<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    197</span>             <span class="ansi-red-fg"># special case GeneratorExit.  We must clean up all of our plans</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/preprocessors.py</span> in <span class="ansi-cyan-fg">plan_mutator</span><span class="ansi-blue-fg">(plan, msg_proc)</span>
<span class="ansi-green-intense-fg ansi-bold">    193</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    194</span>             <span class="ansi-red-fg"># yield out the &#39;current message&#39; and collect the return</span>
<span class="ansi-green-fg">--&gt; 195</span><span class="ansi-red-fg">             </span>inner_ret <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">yield</span> msg
<span class="ansi-green-intense-fg ansi-bold">    196</span>         <span class="ansi-green-fg">except</span> GeneratorExit<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    197</span>             <span class="ansi-red-fg"># special case GeneratorExit.  We must clean up all of our plans</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/run_engine.py</span> in <span class="ansi-cyan-fg">_run</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   1411</span>                         <span class="ansi-red-fg"># exceptions (coming in via throw) can be</span>
<span class="ansi-green-intense-fg ansi-bold">   1412</span>                         <span class="ansi-red-fg"># raised</span>
<span class="ansi-green-fg">-&gt; 1413</span><span class="ansi-red-fg">                         </span>new_response <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">await</span> coro<span class="ansi-blue-fg">(</span>msg<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1414</span>
<span class="ansi-green-intense-fg ansi-bold">   1415</span>                     <span class="ansi-red-fg"># special case `CancelledError` and let the outer</span>

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/bluesky/run_engine.py</span> in <span class="ansi-cyan-fg">_set</span><span class="ansi-blue-fg">(self, msg)</span>
<span class="ansi-green-intense-fg ansi-bold">   1907</span>         group <span class="ansi-blue-fg">=</span> kwargs<span class="ansi-blue-fg">.</span>pop<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;group&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1908</span>         self<span class="ansi-blue-fg">.</span>_movable_objs_touched<span class="ansi-blue-fg">.</span>add<span class="ansi-blue-fg">(</span>msg<span class="ansi-blue-fg">.</span>obj<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">-&gt; 1909</span><span class="ansi-red-fg">         </span>ret <span class="ansi-blue-fg">=</span> msg<span class="ansi-blue-fg">.</span>obj<span class="ansi-blue-fg">.</span>set<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span>msg<span class="ansi-blue-fg">.</span>args<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1910</span>         p_event <span class="ansi-blue-fg">=</span> asyncio<span class="ansi-blue-fg">.</span>Event<span class="ansi-blue-fg">(</span>loop<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>loop<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1911</span>         pardon_failures <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>_pardon_failures

<span class="ansi-green-fg">~/virtualenv/python3.7.1/lib/python3.7/site-packages/ophyd/device.py</span> in <span class="ansi-cyan-fg">__getattr__</span><span class="ansi-blue-fg">(self, name)</span>
<span class="ansi-green-intense-fg ansi-bold">   1195</span>         <span class="ansi-red-fg"># Components will be instantiated through the descriptor mechanism in</span>
<span class="ansi-green-intense-fg ansi-bold">   1196</span>         <span class="ansi-red-fg"># the Component class, so anything reaching this point is an error.</span>
<span class="ansi-green-fg">-&gt; 1197</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">raise</span> AttributeError<span class="ansi-blue-fg">(</span>name<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1198</span>
<span class="ansi-green-intense-fg ansi-bold">   1199</span>     <span class="ansi-green-fg">def</span> _instantiate_component<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> attr<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-red-fg">AttributeError</span>: set
</pre></div></div>
</div>
<p>We’ll add one more column to extract the ‘exit_status’ reported by <code class="docutils literal notranslate"><span class="pre">RE</span></code> before it errored out.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HH:MM  plan_name  detectors      motors         exit_status&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">db</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="n">an_hour_ago</span><span class="p">):</span>
    <span class="n">md</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">start</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span><span class="si">:</span><span class="s2">%H:%M</span><span class="si">}</span><span class="s2">  &quot;</span>
          <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;plan_name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">11</span><span class="si">}</span><span class="s2">&quot;</span>
          <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
          <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;motors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
          <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">stop</span><span class="p">[</span><span class="s1">&#39;exit_status&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
HH:MM  plan_name  detectors      motors         exit_status
20:36  count      ph                            success
20:36  scan       edge           motor_edge     success
20:36  scan       edge           motor_edge     success
20:36  count      ph,edge,slit                  success
20:36  scan       slit           motor_slit     success
20:36  scan       ph             motor_ph       success
20:36  scan       motor_ph       ph             fail
</pre></div></div>
</div>
<p>Let’s make it easier to reuse this code block by formulating it as a function.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">summarize_runs</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HH:MM  plan_name  detectors      motors         exit_status&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">:</span>
        <span class="n">md</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">start</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span><span class="si">:</span><span class="s2">%H:%M</span><span class="si">}</span><span class="s2">  &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;plan_name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">11</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;motors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">stop</span><span class="p">[</span><span class="s1">&#39;exit_status&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="n">summarize_runs</span><span class="p">(</span><span class="n">db</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="n">an_hour_ago</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
HH:MM  plan_name  detectors      motors         exit_status
20:36  count      ph                            success
20:36  scan       edge           motor_edge     success
20:36  scan       edge           motor_edge     success
20:36  count      ph,edge,slit                  success
20:36  scan       slit           motor_slit     success
20:36  scan       ph             motor_ph       success
20:36  scan       motor_ph       ph             fail
</pre></div></div>
</div>
<p>Getting a little fancy (Too fancy? Maybe….) you can print by default but optionally write to a text file instead.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">functools</span>

<span class="k">def</span> <span class="nf">summarize_runs</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">write</span><span class="o">=</span><span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="nb">print</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)):</span>
    <span class="n">write</span><span class="p">(</span><span class="s2">&quot;HH:MM  plan_name  detectors      motors         exit_status</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">:</span>
        <span class="n">md</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">start</span>
        <span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span><span class="si">:</span><span class="s2">%H:%M</span><span class="si">}</span><span class="s2">  &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;plan_name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">11</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;motors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">stop</span><span class="p">[</span><span class="s1">&#39;exit_status&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="n">summarize_runs</span><span class="p">(</span><span class="n">db</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="n">an_hour_ago</span><span class="p">))</span>  <span class="c1"># prints as before</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
HH:MM  plan_name  detectors      motors         exit_status
20:36  count      ph                            success
20:36  scan       edge           motor_edge     success
20:36  scan       edge           motor_edge     success
20:36  count      ph,edge,slit                  success
20:36  scan       slit           motor_slit     success
20:36  scan       ph             motor_ph       success
20:36  scan       motor_ph       ph             fail
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">summarize_runs</span><span class="p">(</span><span class="n">db</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="n">an_hour_ago</span><span class="p">),</span> <span class="n">write</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;summary.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">)</span>  <span class="c1"># writes to &#39;summary.txt&#39;</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># cat is a UNIX command for reading a text file. We could also just go open the file like normal people.</span>
<span class="o">!</span>cat summary.txt
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
HH:MM  plan_name  detectors      motors         exit_status
20:36  count      ph                            success
20:36  scan       edge           motor_edge     success
20:36  scan       edge           motor_edge     success
20:36  count      ph,edge,slit                  success
20:36  scan       slit           motor_slit     success
20:36  scan       ph             motor_ph       success
20:36  scan       motor_ph       ph             fail
</pre></div></div>
</div>
</div>
<div class="section" id="If-the-user-tells-us-more,-our-report-can-get-richer">
<h2>If the user tells us more, our report can get richer<a class="headerlink" href="#If-the-user-tells-us-more,-our-report-can-get-richer" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;operator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Dan&#39;</span>
</pre></div>
</div>
</div>
<p>This applies to all future runs until deleted:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;operator&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>replaced</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;operator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Tom&#39;</span>
</pre></div>
</div>
<p>or superceded</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">RE</span><span class="p">(</span><span class="n">count</span><span class="p">([</span><span class="n">ph</span><span class="p">]),</span> <span class="n">operator</span><span class="o">=</span><span class="s1">&#39;Maksim&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In that last example, <code class="docutils literal notranslate"><span class="pre">'Maksim'</span></code> takes precedence over whatever is in RE.md, but just for this execution. If next we did</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">RE</span><span class="p">(</span><span class="n">count</span><span class="p">([</span><span class="n">ph</span><span class="p">]))</span>
</pre></div>
</div>
<p>the operator would revert back to <code class="docutils literal notranslate"><span class="pre">'Tom'</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># User reports the run&#39;s &quot;purpose&quot;. (That isn&#39;t a special name... you can use any terms you want here...)</span>
<span class="n">RE</span><span class="p">(</span><span class="n">count</span><span class="p">([</span><span class="n">ph</span><span class="p">]),</span> <span class="n">purpose</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="n">RE</span><span class="p">(</span><span class="n">count</span><span class="p">([</span><span class="n">ph</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">slit</span><span class="p">],</span> <span class="mi">3</span><span class="p">),</span> <span class="n">purpose</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">edge</span><span class="p">],</span> <span class="n">motor_edge</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="n">purpose</span><span class="o">=</span><span class="s1">&#39;find edge&#39;</span><span class="p">)</span>
<span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">edge</span><span class="p">],</span> <span class="n">motor_edge</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">purpose</span><span class="o">=</span><span class="s1">&#39;find edge&#39;</span><span class="p">)</span>
<span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;operator&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Tom&#39;</span>  <span class="c1"># Tom takes over.</span>
<span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">ph</span><span class="p">],</span> <span class="n">motor_ph</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">purpose</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">slit</span><span class="p">],</span> <span class="n">motor_slit</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="n">purpose</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 20     Time: 2020-05-18 20:36:45
Persistent Unique Scan ID: &#39;12070228-146b-4df5-8505-3e93bbeffad6&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+
|   seq_num |       time |     ph_det |
+-----------+------------+------------+
|         1 | 20:36:45.5 |      80278 |
+-----------+------------+------------+
generator count [&#39;12070228&#39;] (scan num: 20)





Transient Scan ID: 21     Time: 2020-05-18 20:36:45
Persistent Unique Scan ID: &#39;b87afdf3-0195-45c3-b94c-12ecb3dbb40f&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+------------+------------+
|   seq_num |       time |   slit_det |     ph_det |   edge_det |
+-----------+------------+------------+------------+------------+
|         1 | 20:36:45.6 |       7544 |      80066 |      12384 |
|         2 | 20:36:45.6 |       7633 |      80217 |      12183 |
|         3 | 20:36:45.7 |       7564 |      79365 |      12236 |
+-----------+------------+------------+------------+------------+
generator count [&#39;b87afdf3&#39;] (scan num: 21)





Transient Scan ID: 22     Time: 2020-05-18 20:36:45
Persistent Unique Scan ID: &#39;757f4d52-f4de-4e37-89d1-8609a121c299&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+------------+
|   seq_num |       time | motor_edge |   edge_det |
+-----------+------------+------------+------------+
|         1 | 20:36:46.1 |    -10.000 |          0 |
|         2 | 20:36:46.1 |     -8.571 |          0 |
|         3 | 20:36:46.1 |     -7.143 |          0 |
|         4 | 20:36:46.1 |     -5.714 |          0 |
|         5 | 20:36:46.1 |     -4.286 |          0 |
|         6 | 20:36:46.1 |     -2.857 |          1 |
|         7 | 20:36:46.1 |     -1.429 |         15 |
|         8 | 20:36:46.1 |      0.000 |        219 |
|         9 | 20:36:46.2 |      1.429 |       2059 |
|        10 | 20:36:46.2 |      2.857 |      10850 |
|        11 | 20:36:46.2 |      4.286 |      32645 |
|        12 | 20:36:46.3 |      5.714 |      62723 |
|        13 | 20:36:46.3 |      7.143 |      84935 |
|        14 | 20:36:46.3 |      8.571 |      93564 |
|        15 | 20:36:46.3 |     10.000 |      95266 |
+-----------+------------+------------+------------+
generator scan [&#39;757f4d52&#39;] (scan num: 22)





Transient Scan ID: 23     Time: 2020-05-18 20:36:46
Persistent Unique Scan ID: &#39;145ac334-90c1-42e4-bf55-5667b1691038&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+------------+
|   seq_num |       time | motor_edge |   edge_det |
+-----------+------------+------------+------------+
|         1 | 20:36:46.7 |     -1.000 |         39 |
|         2 | 20:36:46.7 |      0.000 |        220 |
|         3 | 20:36:46.7 |      1.000 |       1144 |
|         4 | 20:36:46.7 |      2.000 |       4333 |
|         5 | 20:36:46.7 |      3.000 |      12484 |
+-----------+------------+------------+------------+
generator scan [&#39;145ac334&#39;] (scan num: 23)





Transient Scan ID: 24     Time: 2020-05-18 20:36:46
Persistent Unique Scan ID: &#39;59dc60cf-833f-4834-9c9d-3cf359ef1c7e&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+------------+
|   seq_num |       time |   motor_ph |     ph_det |
+-----------+------------+------------+------------+
|         1 | 20:36:46.9 |     -1.000 |      97962 |
|         2 | 20:36:46.9 |      0.000 |      99572 |
|         3 | 20:36:46.9 |      1.000 |      97915 |
|         4 | 20:36:46.9 |      2.000 |      91967 |
|         5 | 20:36:46.9 |      3.000 |      83509 |
+-----------+------------+------------+------------+
generator scan [&#39;59dc60cf&#39;] (scan num: 24)





Transient Scan ID: 25     Time: 2020-05-18 20:36:47
Persistent Unique Scan ID: &#39;cb1c4b74-48ae-41fc-9fb4-06ea890755a3&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+------------+
|   seq_num |       time | motor_slit |   slit_det |
+-----------+------------+------------+------------+
|         1 | 20:36:47.5 |    -10.000 |       8073 |
|         2 | 20:36:47.5 |     -8.571 |      28282 |
|         3 | 20:36:47.6 |     -7.143 |      60320 |
|         4 | 20:36:47.6 |     -5.714 |      87543 |
|         5 | 20:36:47.6 |     -4.286 |     100721 |
|         6 | 20:36:47.6 |     -2.857 |     104194 |
|         7 | 20:36:47.6 |     -1.429 |     104718 |
|         8 | 20:36:47.6 |      0.000 |     104266 |
|         9 | 20:36:47.6 |      1.429 |     104165 |
|        10 | 20:36:47.6 |      2.857 |     103829 |
|        11 | 20:36:47.7 |      4.286 |     100486 |
|        12 | 20:36:47.7 |      5.714 |      88220 |
|        13 | 20:36:47.7 |      7.143 |      60604 |
|        14 | 20:36:47.7 |      8.571 |      28777 |
|        15 | 20:36:47.7 |     10.000 |       8280 |
+-----------+------------+------------+------------+
generator scan [&#39;cb1c4b74&#39;] (scan num: 25)



</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&#39;cb1c4b74-48ae-41fc-9fb4-06ea890755a3&#39;,)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">summarize_runs</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HH:MM  plan_name  detectors      motors         exit_status    purpose&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">:</span>
        <span class="n">md</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">start</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span><span class="si">:</span><span class="s2">%H:%M</span><span class="si">}</span><span class="s2">  &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;plan_name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">11</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;motors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">stop</span><span class="p">[</span><span class="s1">&#39;exit_status&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;purpose&#39;</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="n">summarize_runs</span><span class="p">(</span><span class="n">db</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="n">an_hour_ago</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
HH:MM  plan_name  detectors      motors         exit_status    purpose
20:36  count      ph                            success        ?
20:36  scan       edge           motor_edge     success        ?
20:36  scan       edge           motor_edge     success        find edge
20:36  scan       edge           motor_edge     success        ?
20:36  count      ph,edge,slit                  success        ?
20:36  scan       slit           motor_slit     success        ?
20:36  scan       ph             motor_ph       success        ?
20:36  scan       slit           motor_slit     success        data
20:36  scan       motor_ph       ph             fail           ?
20:36  count      ph                            success        test
20:36  scan       edge           motor_edge     success        find edge
20:36  count      ph,edge,slit                  success        test
20:36  scan       ph             motor_ph       success        data
</pre></div></div>
</div>
</div>
<div class="section" id="Filtering">
<h2>Filtering<a class="headerlink" href="#Filtering" title="Permalink to this headline">¶</a></h2>
<p>We have been filtering based on time. We can filter on user-provided metadata like <code class="docutils literal notranslate"><span class="pre">purpose</span></code> or automatically-captured metadata like <code class="docutils literal notranslate"><span class="pre">detectors</span></code>. And we can apply multiple filters at the same time.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">summarize_runs</span><span class="p">(</span><span class="n">db</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="n">an_hour_ago</span><span class="p">,</span> <span class="n">purpose</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
HH:MM  plan_name  detectors      motors         exit_status    purpose
20:36  scan       slit           motor_slit     success        data
20:36  scan       ph             motor_ph       success        data
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">summarize_runs</span><span class="p">(</span><span class="n">db</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="n">an_hour_ago</span><span class="p">,</span> <span class="n">detectors</span><span class="o">=</span><span class="s1">&#39;ph&#39;</span><span class="p">,</span> <span class="n">purpose</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
HH:MM  plan_name  detectors      motors         exit_status    purpose
20:36  count      ph                            success        test
20:36  count      ph,edge,slit                  success        test
</pre></div></div>
</div>
<p>There is a rich query language available here; we are just exercising the basics.</p>
</div>
<div class="section" id="What-about-getting-the-data-itself?">
<h2>What about getting the data itself?<a class="headerlink" href="#What-about-getting-the-data-itself?" title="Permalink to this headline">¶</a></h2>
<p>Wait for the next notebook!</p>
</div>
<div class="section" id="So-what’s-happening-inside-print(...)?">
<h2>So what’s happening inside <code class="docutils literal notranslate"><span class="pre">print(...)</span></code>?<a class="headerlink" href="#So-what’s-happening-inside-print(...)?" title="Permalink to this headline">¶</a></h2>
<p>A couple handy Python concepts you might not have encountered before…</p>
<div class="section" id="“f-strings”-(new-Python-3.6!)">
<h3>“f-strings” (new Python 3.6!)<a class="headerlink" href="#“f-strings”-(new-Python-3.6!)" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Dan&quot;</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">32</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello my name is </span><span class="si">{name}</span><span class="s2"> and I am </span><span class="si">{age}</span><span class="s2">.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Hello my name is {name} and I am {age}.
</pre></div></div>
</div>
<p>Add an <code class="docutils literal notranslate"><span class="pre">f</span></code> before the quote and it becomes a magical “f-string”!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello my name is </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> and I am </span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Hello my name is Dan and I am 32.
</pre></div></div>
</div>
<p>You can put code inside the <code class="docutils literal notranslate"><span class="pre">{}</span></code>s.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello my name is </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> and next year I will be </span><span class="si">{</span><span class="mi">1</span> <span class="o">+</span> <span class="n">age</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Hello my name is Dan and next year I will be 33.
</pre></div></div>
</div>
</div>
<div class="section" id="Dictionary-lookup-with-defaults">
<h3>Dictionary lookup with defaults<a class="headerlink" href="#Dictionary-lookup-with-defaults" title="Permalink to this headline">¶</a></h3>
<p>Recall basic dictionary manipulations:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">md</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">plan_name</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">detectors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ph&#39;</span><span class="p">,</span> <span class="s1">&#39;edge&#39;</span><span class="p">],</span> <span class="n">time</span><span class="o">=</span><span class="n">now</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;detectors&#39;</span><span class="p">]</span>  <span class="c1"># Look up the value for the &#39;detectors&#39; key in the md dictionary.</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;ph&#39;, &#39;edge&#39;]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;purpose&#39;</span><span class="p">]</span>  <span class="c1"># The user never specified a &#39;purpose&#39; here, so this raises a KeyError.</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">KeyError</span>                                  Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-21-a4691493f52d&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>md<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;purpose&#39;</span><span class="ansi-blue-fg">]</span>  <span class="ansi-red-fg"># The user never specified a &#39;purpose&#39; here, so this raises a KeyError.</span>

<span class="ansi-red-fg">KeyError</span>: &#39;purpose&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;purpose&#39;</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">)</span>  <span class="c1"># Falls back to a default instead of erroring out.</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;?&#39;
</pre></div></div>
</div>
</div>
<div class="section" id="list--&gt;-comma-separated-string">
<h3>list -&gt; comma-separated string<a class="headerlink" href="#list-->-comma-separated-string" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;ph&#39;, &#39;edge&#39;]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[]))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;ph, edge&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;motors&#39;</span><span class="p">,</span> <span class="p">[]))</span>  <span class="c1"># Remember motors isn&#39;t set, so this falls back to the default, an empty list.</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;&#39;
</pre></div></div>
</div>
</div>
<div class="section" id="time-munging">
<h3>time-munging<a class="headerlink" href="#time-munging" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>  <span class="c1"># seconds since 1970, the conventional &quot;UNIX epoch&quot;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1589834204.6527297
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span>  <span class="c1"># year, month, date, hour, minute, second, microseconds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
datetime.datetime(2020, 5, 18, 20, 36, 44, 652730)
</pre></div></div>
</div>
</div>
<div class="section" id="putting-it-all-together…">
<h3>putting it all together…<a class="headerlink" href="#putting-it-all-together…" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">summarize_runs</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HH:MM  plan_name  detectors      motors         exit_status&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">:</span>
        <span class="n">md</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">start</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">  &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;plan_name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;motors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">stop</span><span class="p">[</span><span class="s1">&#39;exit_status&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">summarize_runs</span><span class="p">(</span><span class="n">db</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="n">an_hour_ago</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
HH:MM  plan_name  detectors      motors         exit_status
2020-05-18 20:36:41.649548  countphsuccess
2020-05-18 20:36:42.958383  scanedgemotor_edgesuccess
2020-05-18 20:36:45.910942  scanedgemotor_edgesuccess
2020-05-18 20:36:42.335052  scanedgemotor_edgesuccess
2020-05-18 20:36:41.765650  countph,edge,slitsuccess
2020-05-18 20:36:43.948224  scanslitmotor_slitsuccess
2020-05-18 20:36:43.372961  scanphmotor_phsuccess
2020-05-18 20:36:47.153177  scanslitmotor_slitsuccess
2020-05-18 20:36:44.731742  scanmotor_phphfail
2020-05-18 20:36:45.493411  countphsuccess
2020-05-18 20:36:46.508674  scanedgemotor_edgesuccess
2020-05-18 20:36:45.607241  countph,edge,slitsuccess
2020-05-18 20:36:46.931712  scanphmotor_phsuccess
</pre></div></div>
</div>
</div>
<div class="section" id="finishing-touch:-white-space">
<h3>finishing touch: white space<a class="headerlink" href="#finishing-touch:-white-space" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">:N</span></code> to fix width at <code class="docutils literal notranslate"><span class="pre">N</span></code> characters.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="sa">f</span><span class="s2">&quot;Hello my name is </span><span class="si">{</span><span class="n">name</span><span class="si">:</span><span class="s2">10</span><span class="si">}</span><span class="s2"> is I am </span><span class="si">{</span><span class="n">age</span><span class="si">:</span><span class="s2">5</span><span class="si">}</span><span class="s2">.&quot;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;Hello my name is Dan        is I am    32.&#39;
</pre></div></div>
</div>
<p>Format the time.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span><span class="si">:</span><span class="s2">%H:%M</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;20:36&#39;
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">summarize_runs</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HH:MM  plan_name  detectors      motors         exit_status&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">:</span>
        <span class="n">md</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">start</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span><span class="si">:</span><span class="s2">%H:%M</span><span class="si">}</span><span class="s2">  &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;plan_name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">11</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;motors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">stop</span><span class="p">[</span><span class="s1">&#39;exit_status&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">11</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">summarize_runs</span><span class="p">(</span><span class="n">db</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="n">an_hour_ago</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
HH:MM  plan_name  detectors      motors         exit_status
20:36  count      ph                            success
20:36  scan       edge           motor_edge     success
20:36  scan       edge           motor_edge     success
20:36  scan       edge           motor_edge     success
20:36  count      ph,edge,slit                  success
20:36  scan       slit           motor_slit     success
20:36  scan       ph             motor_ph       success
20:36  scan       slit           motor_slit     success
20:36  scan       motor_ph       ph             fail
20:36  count      ph                            success
20:36  scan       edge           motor_edge     success
20:36  count      ph,edge,slit                  success
20:36  scan       ph             motor_ph       success
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="Exercise">
<h2>Exercise<a class="headerlink" href="#Exercise" title="Permalink to this headline">¶</a></h2>
<p>Q1. Add an ‘operator’ column. Hint: Remember that ‘operator’ was reported by the user in some of our example data above, but the name has no special significance to Bluesky and is not guaranteed to be reported. To avoid erroring when it is not reported, you will need to use <code class="docutils literal notranslate"><span class="pre">md.get(...)</span></code> instead of <code class="docutils literal notranslate"><span class="pre">md[...]</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Type your answer here. We have pasted in the latest version of summarize_runs to start from.</span>

<span class="k">def</span> <span class="nf">summarize_runs</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HH:MM  plan_name  detectors      motors         exit_status&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">:</span>
        <span class="n">md</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">start</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span><span class="si">:</span><span class="s2">%H:%M</span><span class="si">}</span><span class="s2">  &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;plan_name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">11</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;motors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">stop</span><span class="p">[</span><span class="s1">&#39;exit_status&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">load</span> solutions/summarize_runs_with_operator.py
</pre></div>
</div>
</div>
<p>Q2. Print a table with results filtered by operator, just as we filtered results by purpose.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Fill in the blank</span>
<span class="c1"># summarize_runs(db(_____))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">load</span> solutions/filter_runs_by_operator.py
</pre></div>
</div>
</div>
<p>Q3. Add seconds to the time columnn.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Type your answer here. We have pasted in the latest version of summarize_runs to start from.</span>

<span class="k">def</span> <span class="nf">summarize_runs</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HH:MM  plan_name  detectors      motors         exit_status&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">:</span>
        <span class="n">md</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">start</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span><span class="si">:</span><span class="s2">%H:%M</span><span class="si">}</span><span class="s2">  &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;plan_name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">11</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;motors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">stop</span><span class="p">[</span><span class="s1">&#39;exit_status&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">load</span> solutions/summarize_runs_with_seconds.py
</pre></div>
</div>
</div>
<p>Q4. The <code class="docutils literal notranslate"><span class="pre">md['uid']</span></code> is the guaranteed unique identifier for a run. It’s unweildy to print in its entirely. Print just the first 8 characters. (For practical purposes, this is sufficently unique.)</p>
<p>Hint: String truncation in Python works like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;supercalifragilisticexpialidocious&#39;</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;supercal&#39;</span>
</pre></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Type your answer here. We have pasted in the latest version of summarize_runs to start from.</span>

<span class="k">def</span> <span class="nf">summarize_runs</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HH:MM  plan_name  detectors      motors         exit_status&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">:</span>
        <span class="n">md</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">start</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span><span class="si">:</span><span class="s2">%H:%M</span><span class="si">}</span><span class="s2">  &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;plan_name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">11</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;motors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">stop</span><span class="p">[</span><span class="s1">&#39;exit_status&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">load</span> solutions/summarize_runs_with_uid.py
</pre></div>
</div>
</div>
<p>Q5. In all our examples, the columns are left-justified. The <a class="reference external" href="https://docs.python.org/3/library/string.html#format-specification-mini-language">format specification mini language</a> documents how to right-justify or center the text. Right-justify the <code class="docutils literal notranslate"><span class="pre">exit_status</span></code> column. This is a bit of a contrived example, but the feature is more useful when the column have numerical data.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Type your answer here. We have pasted in the latest version of summarize_runs to start from.</span>

<span class="k">def</span> <span class="nf">summarize_runs</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HH:MM  plan_name  detectors      motors         exit_status&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">:</span>
        <span class="n">md</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">start</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span><span class="si">:</span><span class="s2">%H:%M</span><span class="si">}</span><span class="s2">  &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;plan_name&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">11</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detectors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;motors&#39;</span><span class="p">,</span> <span class="p">[]))</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span>
              <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">h</span><span class="o">.</span><span class="n">stop</span><span class="p">[</span><span class="s1">&#39;exit_status&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">15</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">load</span> solutions/summarize_runs_right_justify_exit_status.py
</pre></div>
</div>
</div>
<script type="application/vnd.jupyter.widget-state+json">
{"state": {"03bd71c44f924924a2382d33234a94dd": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "3e4c74812dbd4b00aa96eff57990ad43": {"model_name": "MPLCanvasModel", "model_module": "jupyter-matplotlib", "model_module_version": "^0.7.2", "state": {"_cursor": "default", "_dom_classes": [], "_figure_label": "edge_det ph_det slit_det vs time", "_height": 950, "_image_mode": "diff", "_message": "", "_model_module": "jupyter-matplotlib", "_model_module_version": "^0.7.2", "_model_name": "MPLCanvasModel", "_rubberband_height": 0, "_rubberband_width": 0, "_rubberband_x": 0, "_rubberband_y": 0, "_view_count": null, "_view_module": "jupyter-matplotlib", "_view_module_version": "^0.7.2", "_view_name": "MPLCanvasView", "_width": 640, "footer_visible": true, "header_visible": true, "layout": "IPY_MODEL_03bd71c44f924924a2382d33234a94dd", "resizable": true, "toolbar": "IPY_MODEL_0cc1417d7e0243778488ba1b508b9538", "toolbar_position": "left", "toolbar_visible": true}}, "107a33ec76d541e7b5671171bf17503d": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "0cc1417d7e0243778488ba1b508b9538": {"model_name": "ToolbarModel", "model_module": "jupyter-matplotlib", "model_module_version": "^0.7.2", "state": {"_current_action": "", "_dom_classes": [], "_model_module": "jupyter-matplotlib", "_model_module_version": "^0.7.2", "_model_name": "ToolbarModel", "_view_count": null, "_view_module": "jupyter-matplotlib", "_view_module_version": "^0.7.2", "_view_name": "ToolbarView", "button_style": "", "collapsed": true, "layout": "IPY_MODEL_107a33ec76d541e7b5671171bf17503d", "orientation": "vertical", "toolitems": [["Home", "Reset original view", "home", "home"], ["Back", "Back to previous view", "arrow-left", "back"], ["Forward", "Forward to next view", "arrow-right", "forward"], ["Pan", "Pan axes with left mouse, zoom with right", "arrows", "pan"], ["Zoom", "Zoom to rectangle", "square-o", "zoom"], ["Download", "Download plot", "floppy-o", "save_figure"]]}}, "97f15f7446e8454e95bcb812a9cfdc0b": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "b058fe4c26224f8f80775f0577668be3": {"model_name": "MPLCanvasModel", "model_module": "jupyter-matplotlib", "model_module_version": "^0.7.2", "state": {"_cursor": "default", "_dom_classes": [], "_figure_label": "edge_det vs motor_edge", "_height": 400, "_image_mode": "diff", "_message": "", "_model_module": "jupyter-matplotlib", "_model_module_version": "^0.7.2", "_model_name": "MPLCanvasModel", "_rubberband_height": 0, "_rubberband_width": 0, "_rubberband_x": 0, "_rubberband_y": 0, "_view_count": null, "_view_module": "jupyter-matplotlib", "_view_module_version": "^0.7.2", "_view_name": "MPLCanvasView", "_width": 640, "footer_visible": true, "header_visible": true, "layout": "IPY_MODEL_97f15f7446e8454e95bcb812a9cfdc0b", "resizable": true, "toolbar": "IPY_MODEL_72c9652065e14811a35d61dfe3a8ec84", "toolbar_position": "left", "toolbar_visible": true}}, "baff2ab12b694c78a4ea017667efb184": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "72c9652065e14811a35d61dfe3a8ec84": {"model_name": "ToolbarModel", "model_module": "jupyter-matplotlib", "model_module_version": "^0.7.2", "state": {"_current_action": "", "_dom_classes": [], "_model_module": "jupyter-matplotlib", "_model_module_version": "^0.7.2", "_model_name": "ToolbarModel", "_view_count": null, "_view_module": "jupyter-matplotlib", "_view_module_version": "^0.7.2", "_view_name": "ToolbarView", "button_style": "", "collapsed": true, "layout": "IPY_MODEL_baff2ab12b694c78a4ea017667efb184", "orientation": "vertical", "toolitems": [["Home", "Reset original view", "home", "home"], ["Back", "Back to previous view", "arrow-left", "back"], ["Forward", "Forward to next view", "arrow-right", "forward"], ["Pan", "Pan axes with left mouse, zoom with right", "arrows", "pan"], ["Zoom", "Zoom to rectangle", "square-o", "zoom"], ["Download", "Download plot", "floppy-o", "save_figure"]]}}, "f6f391a318584abe90ba73adff1056f0": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "33f3b77cc1a04f16a52e5fd89d5ce8b2": {"model_name": "MPLCanvasModel", "model_module": "jupyter-matplotlib", "model_module_version": "^0.7.2", "state": {"_cursor": "default", "_dom_classes": [], "_figure_label": "ph_det vs motor_ph", "_height": 400, "_image_mode": "diff", "_message": "", "_model_module": "jupyter-matplotlib", "_model_module_version": "^0.7.2", "_model_name": "MPLCanvasModel", "_rubberband_height": 0, "_rubberband_width": 0, "_rubberband_x": 0, "_rubberband_y": 0, "_view_count": null, "_view_module": "jupyter-matplotlib", "_view_module_version": "^0.7.2", "_view_name": "MPLCanvasView", "_width": 640, "footer_visible": true, "header_visible": true, "layout": "IPY_MODEL_f6f391a318584abe90ba73adff1056f0", "resizable": true, "toolbar": "IPY_MODEL_8c9934721a1c4ac1807fc25ac5bb958a", "toolbar_position": "left", "toolbar_visible": true}}, "929c1d01e5074854bab9f540d68f18f6": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "8c9934721a1c4ac1807fc25ac5bb958a": {"model_name": "ToolbarModel", "model_module": "jupyter-matplotlib", "model_module_version": "^0.7.2", "state": {"_current_action": "", "_dom_classes": [], "_model_module": "jupyter-matplotlib", "_model_module_version": "^0.7.2", "_model_name": "ToolbarModel", "_view_count": null, "_view_module": "jupyter-matplotlib", "_view_module_version": "^0.7.2", "_view_name": "ToolbarView", "button_style": "", "collapsed": true, "layout": "IPY_MODEL_929c1d01e5074854bab9f540d68f18f6", "orientation": "vertical", "toolitems": [["Home", "Reset original view", "home", "home"], ["Back", "Back to previous view", "arrow-left", "back"], ["Forward", "Forward to next view", "arrow-right", "forward"], ["Pan", "Pan axes with left mouse, zoom with right", "arrows", "pan"], ["Zoom", "Zoom to rectangle", "square-o", "zoom"], ["Download", "Download plot", "floppy-o", "save_figure"]]}}, "1b846cb35666455396e5f09a8b634e5b": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "e2a00271bcd3430c98e0c7b1a0d93c4f": {"model_name": "MPLCanvasModel", "model_module": "jupyter-matplotlib", "model_module_version": "^0.7.2", "state": {"_cursor": "default", "_dom_classes": [], "_figure_label": "slit_det vs motor_slit", "_height": 400, "_image_mode": "diff", "_message": "", "_model_module": "jupyter-matplotlib", "_model_module_version": "^0.7.2", "_model_name": "MPLCanvasModel", "_rubberband_height": 0, "_rubberband_width": 0, "_rubberband_x": 0, "_rubberband_y": 0, "_view_count": null, "_view_module": "jupyter-matplotlib", "_view_module_version": "^0.7.2", "_view_name": "MPLCanvasView", "_width": 640, "footer_visible": true, "header_visible": true, "layout": "IPY_MODEL_1b846cb35666455396e5f09a8b634e5b", "resizable": true, "toolbar": "IPY_MODEL_761cd76eabc040a88e9c96a6c8b0813f", "toolbar_position": "left", "toolbar_visible": true}}, "d04b308277504e95a0e54538af393267": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "761cd76eabc040a88e9c96a6c8b0813f": {"model_name": "ToolbarModel", "model_module": "jupyter-matplotlib", "model_module_version": "^0.7.2", "state": {"_current_action": "", "_dom_classes": [], "_model_module": "jupyter-matplotlib", "_model_module_version": "^0.7.2", "_model_name": "ToolbarModel", "_view_count": null, "_view_module": "jupyter-matplotlib", "_view_module_version": "^0.7.2", "_view_name": "ToolbarView", "button_style": "", "collapsed": true, "layout": "IPY_MODEL_d04b308277504e95a0e54538af393267", "orientation": "vertical", "toolitems": [["Home", "Reset original view", "home", "home"], ["Back", "Back to previous view", "arrow-left", "back"], ["Forward", "Forward to next view", "arrow-right", "forward"], ["Pan", "Pan axes with left mouse, zoom with right", "arrows", "pan"], ["Zoom", "Zoom to rectangle", "square-o", "zoom"], ["Download", "Download plot", "floppy-o", "save_figure"]]}}}, "version_major": 2, "version_minor": 0}
</script></div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Epics Signal.html" class="btn btn-neutral float-right" title="Epics Signal" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Access Saved Data.html" class="btn btn-neutral float-left" title="Access Saved Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Bluesky Contributors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>